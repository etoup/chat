import{J as V,O as pe,K as W,L as G,t as K,R as fe,Q as ce,p as F,a1 as Be,y as A,ae as q,e1 as Ze,r as T,F as et,aQ as Me,U as tt,a9 as nt,C as Re,q as ot,aJ as st,e2 as it,$ as de,e3 as at,e4 as rt,e5 as lt,aI as Y,D as Q,e6 as dt,T as Ne,aP as ct,a4 as ut,M as B,af as ue,e7 as mt,aD as vt,az as ye,V as ke,bi as $e,e8 as pt,e9 as ft,ea as ht,eb as _t,at as oe,ec as gt,br as bt,bs as s,bt as ie,bH as U,ck as wt,bI as k,bO as X,bP as l,bK as t,bW as P,bJ as M,bL as u,aW as te,bT as se,bN as D,bQ as ee,c1 as he,ed as yt,ee as kt,ef as $t,bR as ne,w as _e,eg as ge,eh as xt,cN as De,c0 as ae,bY as Ct,b_ as St,ei as Ie,ej as xe,x as zt,ek as Tt,el as Bt,em as Mt,en as Rt,a7 as Ee,cC as Nt,eo as Dt,cx as It,dJ as Et,dK as Ut,cc as Lt,ep as Pt,eq as Ft,er as Ht,bM as At,bU as Ot,bv as Gt,bu as jt,cf as Ce,ad as Se,es as Wt,et as Vt}from"./index-8d305a84.js";import{_ as me}from"./no-data-bde0995b.js";import{N as Ue}from"./Checkbox-f0418712.js";import{N as ze}from"./Scrollbar-97004e60.js";import{S as le}from"./Search-6c0eed6a.js";import{a as Z,N as ve}from"./FormItem-742d2080.js";import{I as Yt,P as be}from"./Plus-9d1366a5.js";import{A as Xt,R as qt}from"./AvatarCropper-1987087f.js";import{u as we}from"./useInject-58e6e07a.js";import{C as Kt}from"./CheckSmall-880f6223.js";import{C as Le}from"./Close-e5fa65a5.js";import{N as Te}from"./Switch-42f61b41.js";const Jt=V("divider",`
 position: relative;
 display: flex;
 width: 100%;
 box-sizing: border-box;
 font-size: 16px;
 color: var(--n-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier);
`,[pe("vertical",`
 margin-top: 24px;
 margin-bottom: 24px;
 `,[pe("no-title",`
 display: flex;
 align-items: center;
 `)]),W("title",`
 display: flex;
 align-items: center;
 margin-left: 12px;
 margin-right: 12px;
 white-space: nowrap;
 font-weight: var(--n-font-weight);
 `),G("title-position-left",[W("line",[G("left",{width:"28px"})])]),G("title-position-right",[W("line",[G("right",{width:"28px"})])]),G("dashed",[W("line",`
 background-color: #0000;
 height: 0px;
 width: 100%;
 border-style: dashed;
 border-width: 1px 0 0;
 `)]),G("vertical",`
 display: inline-block;
 height: 1em;
 margin: 0 8px;
 vertical-align: middle;
 width: 1px;
 `),W("line",`
 border: none;
 transition: background-color .3s var(--n-bezier), border-color .3s var(--n-bezier);
 height: 1px;
 width: 100%;
 margin: 0;
 `),pe("dashed",[W("line",{backgroundColor:"var(--n-color)"})]),G("dashed",[W("line",{borderColor:"var(--n-color)"})]),G("vertical",{backgroundColor:"var(--n-color)"})]),Qt=Object.assign(Object.assign({},ce.props),{titlePlacement:{type:String,default:"center"},dashed:Boolean,vertical:Boolean}),Zt=K({name:"Divider",props:Qt,setup(o){const{mergedClsPrefixRef:p,inlineThemeDisabled:i}=fe(o),m=ce("Divider","-divider",Jt,Ze,o,p),r=F(()=>{const{common:{cubicBezierEaseInOut:a},self:{color:_,textColor:h,fontWeight:c}}=m.value;return{"--n-bezier":a,"--n-color":_,"--n-text-color":h,"--n-font-weight":c}}),f=i?Be("divider",void 0,r,o):void 0;return{mergedClsPrefix:p,cssVars:i?void 0:r,themeClass:f==null?void 0:f.themeClass,onRender:f==null?void 0:f.onRender}},render(){var o;const{$slots:p,titlePlacement:i,vertical:m,dashed:r,cssVars:f,mergedClsPrefix:a}=this;return(o=this.onRender)===null||o===void 0||o.call(this),A("div",{role:"separator",class:[`${a}-divider`,this.themeClass,{[`${a}-divider--vertical`]:m,[`${a}-divider--no-title`]:!p.default,[`${a}-divider--dashed`]:r,[`${a}-divider--title-position-${i}`]:p.default&&i}],style:f},m?null:A("div",{class:`${a}-divider__line ${a}-divider__line--left`}),!m&&p.default?A(q,null,A("div",{class:`${a}-divider__title`},this.$slots),A("div",{class:`${a}-divider__line ${a}-divider__line--right`})):null)}}),en=K({name:"NDrawerContent",inheritAttrs:!1,props:{blockScroll:Boolean,show:{type:Boolean,default:void 0},displayDirective:{type:String,required:!0},placement:{type:String,required:!0},contentClass:String,contentStyle:[Object,String],nativeScrollbar:{type:Boolean,required:!0},scrollbarProps:Object,trapFocus:{type:Boolean,default:!0},autoFocus:{type:Boolean,default:!0},showMask:{type:[Boolean,String],required:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,onClickoutside:Function,onAfterLeave:Function,onAfterEnter:Function,onEsc:Function},setup(o){const p=T(!!o.show),i=T(null),m=et(Me);let r=0,f="",a=null;const _=T(!1),h=T(!1),c=F(()=>o.placement==="top"||o.placement==="bottom"),{mergedClsPrefixRef:w,mergedRtlRef:R}=fe(o),d=tt("Drawer",R,w),g=y,b=e=>{h.value=!0,r=c.value?e.clientY:e.clientX,f=document.body.style.cursor,document.body.style.cursor=c.value?"ns-resize":"ew-resize",document.body.addEventListener("mousemove",O),document.body.addEventListener("mouseleave",g),document.body.addEventListener("mouseup",y)},$=()=>{a!==null&&(window.clearTimeout(a),a=null),h.value?_.value=!0:a=window.setTimeout(()=>{_.value=!0},300)},x=()=>{a!==null&&(window.clearTimeout(a),a=null),_.value=!1},{doUpdateHeight:j,doUpdateWidth:z}=m,v=e=>{const{maxWidth:S}=o;if(S&&e>S)return S;const{minWidth:E}=o;return E&&e<E?E:e},C=e=>{const{maxHeight:S}=o;if(S&&e>S)return S;const{minHeight:E}=o;return E&&e<E?E:e};function O(e){var S,E;if(h.value)if(c.value){let H=((S=i.value)===null||S===void 0?void 0:S.offsetHeight)||0;const J=r-e.clientY;H+=o.placement==="bottom"?J:-J,H=C(H),j(H),r=e.clientY}else{let H=((E=i.value)===null||E===void 0?void 0:E.offsetWidth)||0;const J=r-e.clientX;H+=o.placement==="right"?J:-J,H=v(H),z(H),r=e.clientX}}function y(){h.value&&(r=0,h.value=!1,document.body.style.cursor=f,document.body.removeEventListener("mousemove",O),document.body.removeEventListener("mouseup",y),document.body.removeEventListener("mouseleave",g))}nt(()=>{o.show&&(p.value=!0)}),Re(()=>o.show,e=>{e||y()}),ot(()=>{y()});const N=F(()=>{const{show:e}=o,S=[[Q,e]];return o.showMask||S.push([st,o.onClickoutside,void 0,{capture:!0}]),S});function n(){var e;p.value=!1,(e=o.onAfterLeave)===null||e===void 0||e.call(o)}return it(F(()=>o.blockScroll&&p.value)),de(at,i),de(rt,null),de(lt,null),{bodyRef:i,rtlEnabled:d,mergedClsPrefix:m.mergedClsPrefixRef,isMounted:m.isMountedRef,mergedTheme:m.mergedThemeRef,displayed:p,transitionName:F(()=>({right:"slide-in-from-right-transition",left:"slide-in-from-left-transition",top:"slide-in-from-top-transition",bottom:"slide-in-from-bottom-transition"})[o.placement]),handleAfterLeave:n,bodyDirectives:N,handleMousedownResizeTrigger:b,handleMouseenterResizeTrigger:$,handleMouseleaveResizeTrigger:x,isDragging:h,isHoverOnResizeTrigger:_}},render(){const{$slots:o,mergedClsPrefix:p}=this;return this.displayDirective==="show"||this.displayed||this.show?Y(A("div",{role:"none"},A(dt,{disabled:!this.showMask||!this.trapFocus,active:this.show,autoFocus:this.autoFocus,onEsc:this.onEsc},{default:()=>A(Ne,{name:this.transitionName,appear:this.isMounted,onAfterEnter:this.onAfterEnter,onAfterLeave:this.handleAfterLeave},{default:()=>Y(A("div",ct(this.$attrs,{role:"dialog",ref:"bodyRef","aria-modal":"true",class:[`${p}-drawer`,this.rtlEnabled&&`${p}-drawer--rtl`,`${p}-drawer--${this.placement}-placement`,this.isDragging&&`${p}-drawer--unselectable`,this.nativeScrollbar&&`${p}-drawer--native-scrollbar`]}),[this.resizable?A("div",{class:[`${p}-drawer__resize-trigger`,(this.isDragging||this.isHoverOnResizeTrigger)&&`${p}-drawer__resize-trigger--hover`],onMouseenter:this.handleMouseenterResizeTrigger,onMouseleave:this.handleMouseleaveResizeTrigger,onMousedown:this.handleMousedownResizeTrigger}):null,this.nativeScrollbar?A("div",{class:[`${p}-drawer-content-wrapper`,this.contentClass],style:this.contentStyle,role:"none"},o):A(ut,Object.assign({},this.scrollbarProps,{contentStyle:this.contentStyle,contentClass:[`${p}-drawer-content-wrapper`,this.contentClass],theme:this.mergedTheme.peers.Scrollbar,themeOverrides:this.mergedTheme.peerOverrides.Scrollbar}),o)]),this.bodyDirectives)})})),[[Q,this.displayDirective==="if"||this.displayed||this.show]]):null}}),{cubicBezierEaseIn:tn,cubicBezierEaseOut:nn}=ue;function on({duration:o="0.3s",leaveDuration:p="0.2s",name:i="slide-in-from-bottom"}={}){return[B(`&.${i}-transition-leave-active`,{transition:`transform ${p} ${tn}`}),B(`&.${i}-transition-enter-active`,{transition:`transform ${o} ${nn}`}),B(`&.${i}-transition-enter-to`,{transform:"translateY(0)"}),B(`&.${i}-transition-enter-from`,{transform:"translateY(100%)"}),B(`&.${i}-transition-leave-from`,{transform:"translateY(0)"}),B(`&.${i}-transition-leave-to`,{transform:"translateY(100%)"})]}const{cubicBezierEaseIn:sn,cubicBezierEaseOut:an}=ue;function rn({duration:o="0.3s",leaveDuration:p="0.2s",name:i="slide-in-from-left"}={}){return[B(`&.${i}-transition-leave-active`,{transition:`transform ${p} ${sn}`}),B(`&.${i}-transition-enter-active`,{transition:`transform ${o} ${an}`}),B(`&.${i}-transition-enter-to`,{transform:"translateX(0)"}),B(`&.${i}-transition-enter-from`,{transform:"translateX(-100%)"}),B(`&.${i}-transition-leave-from`,{transform:"translateX(0)"}),B(`&.${i}-transition-leave-to`,{transform:"translateX(-100%)"})]}const{cubicBezierEaseIn:ln,cubicBezierEaseOut:dn}=ue;function cn({duration:o="0.3s",leaveDuration:p="0.2s",name:i="slide-in-from-right"}={}){return[B(`&.${i}-transition-leave-active`,{transition:`transform ${p} ${ln}`}),B(`&.${i}-transition-enter-active`,{transition:`transform ${o} ${dn}`}),B(`&.${i}-transition-enter-to`,{transform:"translateX(0)"}),B(`&.${i}-transition-enter-from`,{transform:"translateX(100%)"}),B(`&.${i}-transition-leave-from`,{transform:"translateX(0)"}),B(`&.${i}-transition-leave-to`,{transform:"translateX(100%)"})]}const{cubicBezierEaseIn:un,cubicBezierEaseOut:mn}=ue;function vn({duration:o="0.3s",leaveDuration:p="0.2s",name:i="slide-in-from-top"}={}){return[B(`&.${i}-transition-leave-active`,{transition:`transform ${p} ${un}`}),B(`&.${i}-transition-enter-active`,{transition:`transform ${o} ${mn}`}),B(`&.${i}-transition-enter-to`,{transform:"translateY(0)"}),B(`&.${i}-transition-enter-from`,{transform:"translateY(-100%)"}),B(`&.${i}-transition-leave-from`,{transform:"translateY(0)"}),B(`&.${i}-transition-leave-to`,{transform:"translateY(-100%)"})]}const pn=B([V("drawer",`
 word-break: break-word;
 line-height: var(--n-line-height);
 position: absolute;
 pointer-events: all;
 box-shadow: var(--n-box-shadow);
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 background-color: var(--n-color);
 color: var(--n-text-color);
 box-sizing: border-box;
 `,[cn(),rn(),vn(),on(),G("unselectable",`
 user-select: none; 
 -webkit-user-select: none;
 `),G("native-scrollbar",[V("drawer-content-wrapper",`
 overflow: auto;
 height: 100%;
 `)]),W("resize-trigger",`
 position: absolute;
 background-color: #0000;
 transition: background-color .3s var(--n-bezier);
 `,[G("hover",`
 background-color: var(--n-resize-trigger-color-hover);
 `)]),V("drawer-content-wrapper",`
 box-sizing: border-box;
 `),V("drawer-content",`
 height: 100%;
 display: flex;
 flex-direction: column;
 `,[G("native-scrollbar",[V("drawer-body-content-wrapper",`
 height: 100%;
 overflow: auto;
 `)]),V("drawer-body",`
 flex: 1 0 0;
 overflow: hidden;
 `),V("drawer-body-content-wrapper",`
 box-sizing: border-box;
 padding: var(--n-body-padding);
 `),V("drawer-header",`
 font-weight: var(--n-title-font-weight);
 line-height: 1;
 font-size: var(--n-title-font-size);
 color: var(--n-title-text-color);
 padding: var(--n-header-padding);
 transition: border .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-divider-color);
 border-bottom: var(--n-header-border-bottom);
 display: flex;
 justify-content: space-between;
 align-items: center;
 `,[W("main",`
 flex: 1;
 `),W("close",`
 margin-left: 6px;
 transition:
 background-color .3s var(--n-bezier),
 color .3s var(--n-bezier);
 `)]),V("drawer-footer",`
 display: flex;
 justify-content: flex-end;
 border-top: var(--n-footer-border-top);
 transition: border .3s var(--n-bezier);
 padding: var(--n-footer-padding);
 `)]),G("right-placement",`
 top: 0;
 bottom: 0;
 right: 0;
 border-top-left-radius: var(--n-border-radius);
 border-bottom-left-radius: var(--n-border-radius);
 `,[W("resize-trigger",`
 width: 3px;
 height: 100%;
 top: 0;
 left: 0;
 transform: translateX(-1.5px);
 cursor: ew-resize;
 `)]),G("left-placement",`
 top: 0;
 bottom: 0;
 left: 0;
 border-top-right-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `,[W("resize-trigger",`
 width: 3px;
 height: 100%;
 top: 0;
 right: 0;
 transform: translateX(1.5px);
 cursor: ew-resize;
 `)]),G("top-placement",`
 top: 0;
 left: 0;
 right: 0;
 border-bottom-left-radius: var(--n-border-radius);
 border-bottom-right-radius: var(--n-border-radius);
 `,[W("resize-trigger",`
 width: 100%;
 height: 3px;
 bottom: 0;
 left: 0;
 transform: translateY(1.5px);
 cursor: ns-resize;
 `)]),G("bottom-placement",`
 left: 0;
 bottom: 0;
 right: 0;
 border-top-left-radius: var(--n-border-radius);
 border-top-right-radius: var(--n-border-radius);
 `,[W("resize-trigger",`
 width: 100%;
 height: 3px;
 top: 0;
 left: 0;
 transform: translateY(-1.5px);
 cursor: ns-resize;
 `)])]),B("body",[B(">",[V("drawer-container",`
 position: fixed;
 `)])]),V("drawer-container",`
 position: relative;
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 pointer-events: none;
 `,[B("> *",`
 pointer-events: all;
 `)]),V("drawer-mask",`
 background-color: rgba(0, 0, 0, .3);
 position: absolute;
 left: 0;
 right: 0;
 top: 0;
 bottom: 0;
 `,[G("invisible",`
 background-color: rgba(0, 0, 0, 0)
 `),mt({enterDuration:"0.2s",leaveDuration:"0.2s",enterCubicBezier:"var(--n-bezier-in)",leaveCubicBezier:"var(--n-bezier-out)"})])]),fn=Object.assign(Object.assign({},ce.props),{show:Boolean,width:[Number,String],height:[Number,String],placement:{type:String,default:"right"},maskClosable:{type:Boolean,default:!0},showMask:{type:[Boolean,String],default:!0},to:[String,Object],displayDirective:{type:String,default:"if"},nativeScrollbar:{type:Boolean,default:!0},zIndex:Number,onMaskClick:Function,scrollbarProps:Object,contentClass:String,contentStyle:[Object,String],trapFocus:{type:Boolean,default:!0},onEsc:Function,autoFocus:{type:Boolean,default:!0},closeOnEsc:{type:Boolean,default:!0},blockScroll:{type:Boolean,default:!0},maxWidth:Number,maxHeight:Number,minWidth:Number,minHeight:Number,resizable:Boolean,defaultWidth:{type:[Number,String],default:251},defaultHeight:{type:[Number,String],default:251},onUpdateWidth:[Function,Array],onUpdateHeight:[Function,Array],"onUpdate:width":[Function,Array],"onUpdate:height":[Function,Array],"onUpdate:show":[Function,Array],onUpdateShow:[Function,Array],onAfterEnter:Function,onAfterLeave:Function,drawerStyle:[String,Object],drawerClass:String,target:null,onShow:Function,onHide:Function}),js=K({name:"Drawer",inheritAttrs:!1,props:fn,setup(o){const{mergedClsPrefixRef:p,namespaceRef:i,inlineThemeDisabled:m}=fe(o),r=vt(),f=ce("Drawer","-drawer",pn,_t,o,p),a=T(o.defaultWidth),_=T(o.defaultHeight),h=ye(ke(o,"width"),a),c=ye(ke(o,"height"),_),w=F(()=>{const{placement:y}=o;return y==="top"||y==="bottom"?"":$e(h.value)}),R=F(()=>{const{placement:y}=o;return y==="left"||y==="right"?"":$e(c.value)}),d=y=>{const{onUpdateWidth:N,"onUpdate:width":n}=o;N&&oe(N,y),n&&oe(n,y),a.value=y},g=y=>{const{onUpdateHeight:N,"onUpdate:width":n}=o;N&&oe(N,y),n&&oe(n,y),_.value=y},b=F(()=>[{width:w.value,height:R.value},o.drawerStyle||""]);function $(y){const{onMaskClick:N,maskClosable:n}=o;n&&v(!1),N&&N(y)}function x(y){$(y)}const j=pt();function z(y){var N;(N=o.onEsc)===null||N===void 0||N.call(o),o.show&&o.closeOnEsc&&gt(y)&&(j.value||v(!1))}function v(y){const{onHide:N,onUpdateShow:n,"onUpdate:show":e}=o;n&&oe(n,y),e&&oe(e,y),N&&!y&&oe(N,y)}de(Me,{isMountedRef:r,mergedThemeRef:f,mergedClsPrefixRef:p,doUpdateShow:v,doUpdateHeight:g,doUpdateWidth:d});const C=F(()=>{const{common:{cubicBezierEaseInOut:y,cubicBezierEaseIn:N,cubicBezierEaseOut:n},self:{color:e,textColor:S,boxShadow:E,lineHeight:H,headerPadding:J,footerPadding:I,borderRadius:L,bodyPadding:re,titleFontSize:Fe,titleTextColor:He,titleFontWeight:Ae,headerBorderBottom:Oe,footerBorderTop:Ge,closeIconColor:je,closeIconColorHover:We,closeIconColorPressed:Ve,closeColorHover:Ye,closeColorPressed:Xe,closeIconSize:qe,closeSize:Ke,closeBorderRadius:Je,resizableTriggerColorHover:Qe}}=f.value;return{"--n-line-height":H,"--n-color":e,"--n-border-radius":L,"--n-text-color":S,"--n-box-shadow":E,"--n-bezier":y,"--n-bezier-out":n,"--n-bezier-in":N,"--n-header-padding":J,"--n-body-padding":re,"--n-footer-padding":I,"--n-title-text-color":He,"--n-title-font-size":Fe,"--n-title-font-weight":Ae,"--n-header-border-bottom":Oe,"--n-footer-border-top":Ge,"--n-close-icon-color":je,"--n-close-icon-color-hover":We,"--n-close-icon-color-pressed":Ve,"--n-close-size":Ke,"--n-close-color-hover":Ye,"--n-close-color-pressed":Xe,"--n-close-icon-size":qe,"--n-close-border-radius":Je,"--n-resize-trigger-color-hover":Qe}}),O=m?Be("drawer",void 0,C,o):void 0;return{mergedClsPrefix:p,namespace:i,mergedBodyStyle:b,handleOutsideClick:x,handleMaskClick:$,handleEsc:z,mergedTheme:f,cssVars:m?void 0:C,themeClass:O==null?void 0:O.themeClass,onRender:O==null?void 0:O.onRender,isMounted:r}},render(){const{mergedClsPrefix:o}=this;return A(ht,{to:this.to,show:this.show},{default:()=>{var p;return(p=this.onRender)===null||p===void 0||p.call(this),Y(A("div",{class:[`${o}-drawer-container`,this.namespace,this.themeClass],style:this.cssVars,role:"none"},this.showMask?A(Ne,{name:"fade-in-transition",appear:this.isMounted},{default:()=>this.show?A("div",{"aria-hidden":!0,class:[`${o}-drawer-mask`,this.showMask==="transparent"&&`${o}-drawer-mask--invisible`],onClick:this.handleMaskClick}):null}):null,A(en,Object.assign({},this.$attrs,{class:[this.drawerClass,this.$attrs.class],style:[this.mergedBodyStyle,this.$attrs.style],blockScroll:this.blockScroll,contentStyle:this.contentStyle,contentClass:this.contentClass,placement:this.placement,scrollbarProps:this.scrollbarProps,show:this.show,displayDirective:this.displayDirective,nativeScrollbar:this.nativeScrollbar,onAfterEnter:this.onAfterEnter,onAfterLeave:this.onAfterLeave,trapFocus:this.trapFocus,autoFocus:this.autoFocus,resizable:this.resizable,maxHeight:this.maxHeight,minHeight:this.minHeight,maxWidth:this.maxWidth,minWidth:this.minWidth,showMask:this.showMask,onEsc:this.handleEsc,onClickoutside:this.handleOutsideClick}),this.$slots)),[[ft,{zIndex:this.zIndex,enabled:this.show}]])}})}}),hn=bt("comment",!0,function(o){return s("svg",{width:o.size,height:o.size,viewBox:"0 0 48 48",fill:"none"},[s("path",{d:"M44 6H4V36H13V41L23 36H44V6Z",fill:o.colors[1],stroke:o.colors[0],"stroke-width":o.strokeWidth,"stroke-linecap":o.strokeLinecap,"stroke-linejoin":o.strokeLinejoin},null),s("path",{d:"M14 19.5V22.5",stroke:o.colors[2],"stroke-width":o.strokeWidth,"stroke-linecap":o.strokeLinecap,"stroke-linejoin":o.strokeLinejoin},null),s("path",{d:"M24 19.5V22.5",stroke:o.colors[2],"stroke-width":o.strokeWidth,"stroke-linecap":o.strokeLinecap,"stroke-linejoin":o.strokeLinejoin},null),s("path",{d:"M34 19.5V22.5",stroke:o.colors[2],"stroke-width":o.strokeWidth,"stroke-linecap":o.strokeLinecap,"stroke-linejoin":o.strokeLinejoin},null)])}),_n={class:"el-container launch-box"},gn={class:"el-aside bdr-r",style:{width:"280px"}},bn={class:"el-container is-vertical height100"},wn={class:"el-header",style:{height:"50px",padding:"16px"}},yn={class:"el-main o-hidden"},kn={class:"friend-items"},$n=["onClick"],xn={class:"avatar"},Cn={class:"content"},Sn={class:"text-ellipsis"},zn={class:"checkbox"},Tn={class:"el-main"},Bn={class:"el-container is-vertical height100"},Mn={key:0,class:"el-header",style:{height:"90px",padding:"10px 15px"}},Rn={class:"el-header",style:{height:"50px"}},Nn={class:"el-main o-hidden"},Dn={class:"friend-items"},In=["onClick"],En={class:"avatar"},Un={class:"content"},Ln={class:"text-ellipsis"},Pn={class:"checkbox"},Fn={class:"footer"},Hn=K({__name:"GroupLaunch",props:{gid:{type:Number,default:0}},emits:["close","on-submit","on-invite"],setup(o,{emit:p}){const i=p,m=o,r=T([]),f=ie({keywords:"",name:""}),a=T(!0),_=T(!0),h=F(()=>f.keywords?r.value.filter(z=>z.nickname.match(f.keywords)!=null):r.value),c=F(()=>r.value.filter(z=>z.checked)),w=F(()=>m.gid>0?!c.value.length:!(f.name.trim()&&c.value.length)),R=()=>{f.name="",r.value.forEach(z=>{z.checked=!1})},d=()=>{yt({group_id:m.gid}).then(z=>{if(z.code==200&&z.data){let v=z.data||[];r.value=v.map(C=>Object.assign(C,{nickname:C.friend_remark?C.friend_remark:C.nickname,checked:!1}))}}).finally(()=>{a.value=!1})},g=()=>{i("close")},b=z=>{let v=r.value.find(C=>C.id===z.id);v&&(v.checked=!v.checked)},$=z=>{kt({avatar:"",name:f.name,profile:"",ids:z.join(",")}).then(v=>{v.code==200&&(R(),i("on-submit",v.data),window.$message.success("创建成功"),_.value=!1)})},x=z=>{$t({group_id:m.gid,ids:z.join(",")}).then(v=>{v.code==200&&(i("on-invite"),window.$message.success("邀请成功"),_.value=!1)})},j=()=>{const z=c.value.map(v=>v.id);m.gid==0?$(z):x(z)};return d(),(z,v)=>{const C=U("n-icon"),O=U("im-avatar"),y=U("n-button"),N=wt("loading");return k(),X(u(he),{show:_.value,"onUpdate:show":v[3]||(v[3]=n=>_.value=n),preset:"card",title:o.gid==0?"创建群聊":"邀请新的联系人",class:"modal-radius",style:{"max-width":"650px",height:"550px"},"on-after-leave":g,segmented:{content:!0,footer:!0},"content-style":{padding:0}},{footer:l(()=>[t("div",Fn,[s(y,{type:"tertiary",onClick:v[2]||(v[2]=n=>_.value=!1)},{default:l(()=>v[4]||(v[4]=[P(" 取消 ")])),_:1}),s(y,{type:"primary",class:"mt-l15",onClick:j,disabled:w.value},{default:l(()=>v[5]||(v[5]=[P(" 提交 ")])),_:1},8,["disabled"])])]),default:l(()=>[t("section",_n,[Y((k(),M("aside",gn,[t("section",bn,[t("header",wn,[s(u(te),{placeholder:"搜索",value:f.keywords,"onUpdate:value":v[0]||(v[0]=n=>f.keywords=n),clearable:""},{prefix:l(()=>[s(C,{component:u(le)},null,8,["component"])]),_:1},8,["value"])]),t("main",yn,[s(u(ze),null,{default:l(()=>[t("div",kn,[(k(!0),M(q,null,se(h.value,n=>(k(),M("div",{class:"friend-item pointer",key:n.id,onClick:e=>b(n)},[t("div",xn,[s(O,{class:"pointer",src:n.avatar,size:25,username:n.nickname},null,8,["src","username"])]),t("div",Cn,[t("span",Sn,D(n.nickname),1)]),t("div",zn,[s(u(Ue),{size:"small",checked:n.checked,"onUpdate:checked":e=>n.checked=!n.checked},null,8,["checked","onUpdate:checked"])])],8,$n))),128))])]),_:1})])])])),[[N,a.value]]),t("main",Tn,[t("section",Bn,[m.gid===0?(k(),M("header",Mn,[s(u(ve),null,{default:l(()=>[s(u(Z),{label:"群聊名称",required:!0},{default:l(()=>[s(u(te),{value:f.name,"onUpdate:value":v[1]||(v[1]=n=>f.name=n),placeholder:"必填",maxlength:"20","show-count":""},null,8,["value"])]),_:1})]),_:1})])):ee("",!0),t("header",Rn,[s(u(Zt),{"title-placement":"left",style:{"margin-top":"15px","margin-bottom":"0","font-weight":"300"}},{default:l(()=>[P(" 邀请成员("+D(c.value.length)+") ",1)]),_:1})]),t("main",Nn,[s(u(ze),null,{default:l(()=>[t("div",Dn,[(k(!0),M(q,null,se(c.value,n=>(k(),M("div",{class:"friend-item pointer",key:n.id,onClick:e=>b(n)},[t("div",En,[s(O,{class:"pointer",src:n.avatar,size:25,username:n.nickname},null,8,["src","username"])]),t("div",Un,[t("span",Ln,D(n.nickname),1)]),t("div",Pn,[s(C,{size:16,component:u(Yt)},null,8,["component"])])],8,In))),128))])]),_:1})])])])])]),_:1},8,["show","title"])}}});const Pe=ne(Hn,[["__scopeId","data-v-b565685f"]]),An={class:"section el-container is-vertical height100"},On={class:"el-main main"},Gn=K({__name:"DetailTab",props:{id:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=o,m=T(!1),r=ie({name:"",avatar:"",profile:""}),f=h=>{m.value=!1,r.avatar=h,_()},a=()=>{ge({group_id:i.id}).then(h=>{h.code==200&&(r.name=h.data.group_name,r.avatar=h.data.avatar,r.profile=h.data.profile)})};function _(){if(r.name.trim()=="")return window.$message.info("群名称不能为空");xt({group_id:i.id,group_name:r.name,avatar:r.avatar,profile:r.profile}).then(h=>{h.code==200?window.$message.success("群信息更新成功"):window.$message.error(h.message)})}return _e(()=>{a()}),(h,c)=>{const w=U("n-avatar"),R=U("n-button");return k(),M(q,null,[t("section",An,[c[6]||(c[6]=t("header",{class:"el-header header bdr-b"},[t("p",null,"基础信息")],-1)),t("main",On,[s(u(ve),{ref:"formRef",style:{minWinth:"350px",maxWidth:"350px"}},{default:l(()=>[s(u(Z),{label:"群头像:",path:"name"},{default:l(()=>[r.avatar?(k(),X(w,{key:0,size:60,src:r.avatar},null,8,["src"])):(k(),X(w,{key:1,size:60,style:{color:"white",backgroundColor:"#508afe",fontSize:"18px"}},{default:l(()=>[P(D(r.name.substring(0,1)),1)]),_:1})),s(R,{type:"primary",size:"tiny",style:{"margin-left":"20px"},dashed:"",onClick:c[0]||(c[0]=d=>m.value=!0)},{default:l(()=>c[4]||(c[4]=[P(" 上传头像 ")])),_:1})]),_:1}),s(u(Z),{label:"群名称:",required:"",path:"name"},{default:l(()=>[s(u(te),{placeholder:"必填",type:"text",value:r.name,"onUpdate:value":c[1]||(c[1]=d=>r.name=d)},null,8,["value"])]),_:1}),s(u(Z),{label:"群简介:",path:"profile"},{default:l(()=>[s(u(te),{placeholder:"选填",type:"textarea",value:r.profile,"onUpdate:value":c[2]||(c[2]=d=>r.profile=d)},null,8,["value"])]),_:1}),s(u(Z),{label:""},{default:l(()=>[s(R,{type:"primary",onClick:_},{default:l(()=>c[5]||(c[5]=[P(" 保存信息 ")])),_:1})]),_:1})]),_:1},512)])]),m.value?(k(),X(Xt,{key:0,onClose:c[3]||(c[3]=d=>m.value=!1),onSuccess:f})):ee("",!0)],64)}}});const jn=ne(Gn,[["__scopeId","data-v-a8cd8ba6"]]),Wn={class:"el-container is-vertical height100"},Vn={class:"el-header header bdr-b"},Yn={key:0,class:"el-main main flex-center"},Xn={key:1,class:"el-main main me-scrollbar me-scrollbar-thumb"},qn={class:"tool flex-center"},Kn=["onClick"],Jn=["onClick","onContextmenu"],Qn={class:"item-title"},Zn={class:"nickname text-ellipsis"},eo={class:"badge master"},to={class:"badge leader"},no={class:"badge muted"},oo={class:"item-text text-ellipsis"},so={class:"el-footer footer bdr-t"},io={class:"tips"},ao=K({__name:"MemberTab",props:{id:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=o,{showUserInfoModal:m}=we(),r=De(),f=T(!1),a=T(""),_=T(!1),h=T([]),c=F(()=>h.value.filter(n=>n.is_delete)),w=F(()=>a.value.length?h.value.filter(n=>n.nickname.match(a.value)!=null||n.remark.match(a.value)!=null):h.value),R=F(()=>h.value.some(n=>n.user_id==r.uid&&n.leader==2)),d=ie({options:[],show:!1,dropdownX:0,dropdownY:0,item:{}}),g=()=>{Ie({group_id:i.id}).then(n=>{if(n.code==200){let e=n.data.items||[];e.forEach(S=>{S.is_delete=!1}),h.value=e}})},b=n=>{let e=`删除 [${n.nickname}] 群成员？`;window.$dialog.create({title:"温馨提示",content:e,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{xe({group_id:i.id,members_ids:`${n.user_id}`}).then(S=>{S.code==200&&(g(),window.$message.success("删除成功"))})}})},$=()=>{c.value.length&&window.$dialog.create({title:"温馨提示",content:"批量删除群成员？",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{xe({group_id:i.id,members_ids:c.value.map(n=>n.user_id).join(",")}).then(n=>{n.code==200&&(_.value=!1,g(),window.$message.success("删除成功"))})}})},x=n=>{_.value==!0?n.leader<2&&(n.is_delete=!n.is_delete):m(n.user_id)},j=()=>{h.value.forEach(n=>{n.is_delete=!1}),_.value=!1},z=n=>{m(n.user_id)},v=n=>{let e=n.leader==0?`确定要给 [${n.nickname}] 分配管理员权限吗？`:`确定解除 [${n.nickname}] 管理员权限吗？`;window.$dialog.create({title:"温馨提示",content:e,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Tt({mode:n.leader==0?1:2,group_id:i.id,user_id:n.user_id}).then(S=>{S.code==200?(window.$message.success("操作成功"),g()):window.$message.error(S.message)})}})},C=n=>{window.$dialog.create({title:"温馨提示",content:`确定把群主权限转交给 [${n.nickname}] ？`,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Bt({group_id:i.id,user_id:n.user_id}).then(e=>{e.code==200?(window.$message.success("操作成功"),g()):window.$message.error(e.message)})}})},O=n=>{let e=`确定要禁言 [${n.nickname}] 此用户吗？`;n.is_mute===1&&(e=`确定要解除 [${n.nickname}] 此用户的禁言吗？`),window.$dialog.create({title:"温馨提示",content:e,positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{Mt({mode:n.is_mute==0?1:2,group_id:i.id,user_id:n.user_id}).then(S=>{S.code==200?(window.$message.success("操作成功"),g()):window.$message.error(S.message)})}})},y=(n,e)=>{_.value==!0||e.leader==2||(d.show=!1,d.item=Object.assign({},e),d.options=[{label:"查看成员",key:"info"},{label:e.is_mute?"解除禁言":"禁止发言",key:"forbidden"},{label:"删除成员",key:"delete"},{label:"批量删除",key:"batch_delete"}],R.value&&(d.options.push({label:"转让群主",key:"transfer"}),e.leader==1?d.options.push({label:"管理权限(解除)",key:"assignment"}):e.leader==0&&d.options.push({label:"管理权限(分配)",key:"assignment"})),zt(()=>{d.show=!0,d.dropdownX=n.clientX,d.dropdownY=n.clientY}),n.preventDefault())},N=n=>{const e={info:z,assignment:v,transfer:C,forbidden:O,delete:b,batch_delete:()=>{_.value=!0}};d.show=!1,e[n]&&e[n](d.item)};return g(),(n,e)=>{const S=U("n-icon"),E=U("n-input"),H=U("n-button"),J=U("n-empty"),I=U("im-avatar");return k(),M(q,null,[t("section",Wn,[t("header",Vn,[t("p",null,"成员管理("+D(w.value.length)+")",1),t("div",null,[s(u(ae),null,{default:l(()=>[s(E,{placeholder:"搜索",value:a.value,"onUpdate:value":e[0]||(e[0]=L=>a.value=L),valueModifiers:{trim:!0},clearable:"",style:{width:"200px"},round:""},{prefix:l(()=>[s(S,{component:u(le)},null,8,["component"])]),_:1},8,["value"]),s(H,{circle:"",onClick:e[1]||(e[1]=L=>f.value=!0)},{icon:l(()=>[s(S,{component:u(be)},null,8,["component"])]),_:1})]),_:1})])]),w.value.length===0?(k(),M("main",Yn,[s(J,{size:"200",description:"暂无相关数据"},{icon:l(()=>e[4]||(e[4]=[t("img",{src:me,alt:""},null,-1)])),_:1})])):(k(),M("main",Xn,[(k(!0),M(q,null,se(w.value,L=>(k(),M("div",{class:"member-item",key:L.user_id},[Y(t("div",qn,[s(u(Ue),{disabled:L.leader===2,size:"small",checked:L.is_delete},null,8,["disabled","checked"])],512),[[Q,_.value]]),t("div",{class:"avatar pointer",onClick:re=>z(L)},[s(I,{size:40,src:L.avatar,username:L.nickname},null,8,["src","username"])],8,Kn),t("div",{class:"content pointer o-hidden",onClick:re=>x(L),onContextmenu:Ct(re=>y(re,L),["prevent"])},[t("div",Qn,[t("p",Zn,[t("span",null,D(L.nickname||"未设置昵称"),1),Y(t("span",null," ("+D(L.remark)+")",513),[[Q,L.remark]])]),t("p",null,[Y(t("span",eo,"群主",512),[[Q,L.leader==2]]),Y(t("span",to,"管理员",512),[[Q,L.leader==1]]),Y(t("span",no,"已禁言",512),[[Q,L.is_mute==1]])])]),t("div",oo,D(L.motto||"暂无简介"),1)],40,Jn)]))),128))])),Y(t("footer",so,[t("div",io,"已选("+D(c.value.length)+")",1),t("div",null,[s(u(ae),null,{default:l(()=>[s(H,{type:"primary",ghost:"",size:"small",onClick:j},{default:l(()=>e[5]||(e[5]=[P(" 取消 ")])),_:1}),s(H,{color:"red",size:"small",onClick:$},{default:l(()=>e[6]||(e[6]=[P(" 批量删除 ")])),_:1})]),_:1})])],512),[[Q,_.value]])]),s(u(St),{show:d.show,x:d.dropdownX,y:d.dropdownY,placement:"right",options:d.options,onSelect:N,onClickoutside:e[2]||(e[2]=()=>{d.show=!1,d.item={}})},null,8,["show","x","y","options"]),f.value?(k(),X(Pe,{key:0,gid:o.id,onClose:e[3]||(e[3]=L=>f.value=!1),onOnInvite:g},null,8,["gid"])):ee("",!0)],64)}}});const ro=ne(ao,[["__scopeId","data-v-48cbc871"]]),lo={style:{width:"100%","text-align":"right"}},co=K({__name:"NoticeEditor",props:{id:{type:Number,default:0},gid:{type:Number,default:0},title:{type:String,default:""},content:{type:String,default:""}},emits:["close","success"],setup(o,{emit:p}){const i=p,m=o,r=T(m.id==0?"发布群公告":"编辑群公告"),f=T(),a=ie({title:m.title,content:m.content}),_={title:{required:!0,trigger:["blur","input"],message:"标题不能为空！"},content:{required:!0,trigger:["blur","input"],message:"内容不能为空！"}},h=T(!0),c=T(!1),w=()=>{i("close")},R=()=>{c.value=!0;let g=Rt({notice_id:m.id,group_id:m.gid,title:a.title,content:a.content,is_top:0,is_confirm:0});g.then(b=>{b.code==200?(window.$message.success(b.message),i("success")):window.$message.warning(b.message)}),g.finally(()=>{c.value=!1})},d=g=>{g.preventDefault(),f.value.validate(b=>{!b&&R()})};return(g,b)=>{const $=U("n-button");return k(),X(u(he),{show:h.value,"onUpdate:show":b[2]||(b[2]=x=>h.value=x),preset:"card",title:r.value,size:"huge",style:{"max-width":"450px","border-radius":"10px"},"on-after-leave":w},{footer:l(()=>[t("div",lo,[s($,{type:"tertiary",onClick:w},{default:l(()=>b[3]||(b[3]=[P(" 取消 ")])),_:1}),s($,{type:"primary",class:"mt-l15",loading:c.value,onClick:d},{default:l(()=>b[4]||(b[4]=[P(" 确定 ")])),_:1},8,["loading"])])]),default:l(()=>[s(u(ve),{ref_key:"formRef",ref:f,model:a,rules:_},{default:l(()=>[s(u(Z),{label:"标题",path:"title"},{default:l(()=>[s(u(te),{placeholder:"必填",type:"text",value:a.title,"onUpdate:value":b[0]||(b[0]=x=>a.title=x)},null,8,["value"])]),_:1}),s(u(Z),{label:"内容",path:"content"},{default:l(()=>[s(u(te),{placeholder:"必填",type:"textarea",value:a.content,"onUpdate:value":b[1]||(b[1]=x=>a.content=x),autosize:{minRows:5,maxRows:10}},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show","title"])}}}),uo={class:"section el-container is-vertical height100"},mo={class:"el-header header bdr-b"},vo={key:0,class:"el-main main flex-center"},po={key:1,class:"el-main main me-scrollbar me-scrollbar-thumb"},fo=["onClick"],ho={class:"content pointer o-hidden"},_o={class:"item-title"},go={class:"nickname text-ellipsis"},bo={class:"date"},wo={class:"item-text text-ellipsis"},yo={class:"el-footer footer bdr-t"},ko={class:"tips"},$o=K({__name:"NoticeTab",props:{id:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=o,m=T(""),r=T(!1),f=T([]),a=ie({isShow:!1,id:0,gid:0,title:"",content:""}),_=F(()=>f.value.filter($=>$.is_delete)),h=F(()=>m.value.length?f.value.filter($=>$.title.match(m.value)!=null):f.value),c=()=>{Nt({group_id:i.id}).then($=>{$.code==200&&(f.value=$.data.items||[])})},w=()=>{_.value.length},R=$=>{r.value==!0?console.log($):(a.id=$.id,a.gid=i.id,a.title=$.title,a.content=$.content,a.isShow=!0)},d=()=>{a.id=0,a.gid=i.id,a.title="",a.content="",a.isShow=!0},g=()=>{f.value.forEach($=>{$.is_delete=!1}),r.value=!1},b=()=>{a.isShow=!1,c()};return _e(()=>{c()}),($,x)=>{const j=U("n-icon"),z=U("n-input"),v=U("n-button");return k(),M(q,null,[t("section",uo,[t("header",mo,[t("p",null,"公告管理("+D(h.value.length)+")",1),t("div",null,[s(u(ae),null,{default:l(()=>[s(z,{placeholder:"搜索",value:m.value,"onUpdate:value":x[0]||(x[0]=C=>m.value=C),valueModifiers:{trim:!0},clearable:"",style:{width:"200px"},round:""},{prefix:l(()=>[s(j,{component:u(le)},null,8,["component"])]),_:1},8,["value"]),s(v,{circle:"",onClick:d},{icon:l(()=>[s(j,{component:u(be)},null,8,["component"])]),_:1})]),_:1})])]),h.value.length===0?(k(),M("main",vo,[s(u(Ee),{size:"200",description:"暂无相关数据"},{icon:l(()=>x[2]||(x[2]=[t("img",{src:me},null,-1)])),_:1})])):(k(),M("main",po,[(k(!0),M(q,null,se(h.value,C=>(k(),M("div",{class:"member-item bdr-b",key:C.id,onClick:O=>R(C)},[t("div",ho,[t("div",_o,[t("p",go,[t("span",null,D(C.title),1)]),t("p",null,[t("span",bo,D(C.updated_at),1)])]),t("div",wo,D(C.content),1)])],8,fo))),128))])),Y(t("footer",yo,[t("div",ko,"已选("+D(_.value.length)+")",1),t("div",null,[s(u(ae),null,{default:l(()=>[s(v,{type:"primary",ghost:"",size:"small",onClick:g},{default:l(()=>x[3]||(x[3]=[P(" 取消 ")])),_:1}),s(v,{type:"error",size:"small",onClick:w},{default:l(()=>x[4]||(x[4]=[P(" 删除 ")])),_:1})]),_:1})])],512),[[Q,r.value]])]),a.isShow?(k(),X(co,{key:0,id:a.id,gid:a.gid,title:a.title,content:a.content,onSuccess:b,onClose:x[1]||(x[1]=C=>a.isShow=!1)},null,8,["id","gid","title","content"])):ee("",!0)],64)}}});const xo=ne($o,[["__scopeId","data-v-d384d824"]]),Co={class:"section el-container is-vertical height100"},So={class:"el-header header bdr-b"},zo={key:0,class:"el-main main flex-center"},To={key:1,class:"el-main main me-scrollbar me-scrollbar-thumb"},Bo=["onClick"],Mo=["onClick"],Ro={class:"content pointer o-hidden"},No={class:"item-title"},Do={class:"nickname text-ellipsis"},Io={class:"date mt-l15"},Eo={class:"item-text text-ellipsis"},Uo={class:"tool flex-center"},Lo=K({__name:"ApplyTab",props:{id:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=o,m=T(""),r=T(!1),f=T([]),{showUserInfoModal:a}=we(),_=F(()=>m.value.length?f.value.filter(g=>g.nickname.match(m.value)!=null):f.value),h=()=>{Dt({group_id:i.id}).then(g=>{if(g.code==200){let b=g.data.items||[];f.value=b}})},c=g=>{a(g.user_id)},w=g=>{r.value==!0&&console.log(g)},R=It(g=>{let b=window.$message.loading("请稍等，正在处理");Ut({apply_id:g.id}).then($=>{b.destroy(),$.code==200?window.$message.success("已同意"):window.$message.info($.message),h()})},1e3),d=g=>{let b="",$=window.$dialog.create({title:"拒绝入群申请",content:()=>A(te,{defaultValue:"",placeholder:"请填写拒绝原因",style:{marginTop:"20px"},onInput:x=>b=x,autofocus:!0}),negativeText:"取消",positiveText:"提交",onPositiveClick:()=>(b.length&&($.loading=!0,Et({apply_id:g.id,remark:b}).then(x=>{$.destroy(),x.code==200?window.$message.success("已拒绝"):window.$message.info(x.message),h()})),!1)})};return _e(()=>{h()}),(g,b)=>{const $=U("n-icon"),x=U("n-button"),j=U("n-empty"),z=U("im-avatar");return k(),M("section",Co,[t("header",So,[t("p",null,"申请管理("+D(_.value.length)+")",1),t("div",null,[s(u(ae),null,{default:l(()=>[s(u(te),{placeholder:"搜索",value:m.value,"onUpdate:value":b[0]||(b[0]=v=>m.value=v),valueModifiers:{trim:!0},clearable:"",style:{width:"200px"},round:""},{prefix:l(()=>[s($,{component:u(le)},null,8,["component"])]),_:1},8,["value"]),s(x,{circle:"",onClick:h},{icon:l(()=>[s($,{component:u(qt)},null,8,["component"])]),_:1})]),_:1})])]),_.value.length===0?(k(),M("main",zo,[s(j,{size:"200",description:"暂无相关数据"},{icon:l(()=>b[1]||(b[1]=[t("img",{src:me,alt:""},null,-1)])),_:1})])):(k(),M("main",To,[(k(!0),M(q,null,se(_.value,v=>(k(),M("div",{class:"member-item",key:v.id,onClick:C=>w(v)},[t("div",{class:"avatar pointer",onClick:C=>c(v)},[s(z,{size:40,src:v.avatar,username:v.nickname},null,8,["src","username"])],8,Mo),t("div",Ro,[t("div",No,[t("p",Do,[t("span",null,D(v.nickname),1),t("span",Io,D(v.created_at),1)])]),t("div",Eo,"备注: "+D(v.remark),1)]),t("div",Uo,[s(u(ae),null,{default:l(()=>[s(x,{onClick:C=>u(R)(v),strong:"",secondary:"",circle:"",type:"primary",size:"small"},{icon:l(()=>[s($,{component:u(Kt)},null,8,["component"])]),_:2},1032,["onClick"]),s(x,{onClick:C=>d(v),strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:l(()=>[s($,{component:u(Le)},null,8,["component"])]),_:2},1032,["onClick"])]),_:2},1024)])],8,Bo))),128))]))])}}});const Po=ne(Lo,[["__scopeId","data-v-630352eb"]]),Fo={class:"section el-container is-vertical height100"},Ho={class:"el-main main"},Ao=K({__name:"ConfigTab",props:{id:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=p,m=o,r=ie({is_mute:!1,mute_loading:!1,is_overt:!1,overt_loading:!1}),f=async()=>{const{data:c,code:w}=await ge({group_id:m.id});w===200&&(r.is_mute=c.is_mute===1,r.is_overt=c.is_overt===1)},a=async()=>{const{code:c,message:w}=await Pt({group_id:m.id});c===200?(i("close"),window.$message.success("群聊已解散")):window.$message.info(w)},_=c=>{r.mute_loading=!0,Ft({group_id:m.id,mode:r.is_mute?2:1}).then(({code:w,message:R})=>{w==200?r.is_mute=c:window.$message.info(R)}).finally(()=>{r.mute_loading=!1})},h=c=>{r.overt_loading=!0,Ht({group_id:m.id,mode:r.is_overt?2:1}).then(({code:w,message:R})=>{w==200?r.is_overt=c:window.$message.info(R)}).finally(()=>{r.overt_loading=!1})};return f(),(c,w)=>{const R=U("n-button");return k(),M("section",Fo,[w[2]||(w[2]=t("header",{class:"el-header header bdr-b"},[t("p",null,"设置管理")],-1)),t("main",Ho,[s(u(ve),{"label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging"},{default:l(()=>[s(u(Z),{label:"解散群聊:"},{default:l(()=>[s(u(Lt),{"negative-text":"取消","positive-text":"确定",onPositiveClick:a},{trigger:l(()=>[s(R,{type:"primary",size:"small",text:""},{default:l(()=>w[0]||(w[0]=[P(" 点击解散 ")])),_:1})]),default:l(()=>[w[1]||(w[1]=P(" 确定要解散群聊吗？ 此操作是不可逆的！ "))]),_:1})]),_:1}),s(u(Z),{label:"公开可见:",feedback:"开启后可在公开群聊列表展示。"},{default:l(()=>[s(u(Te),{"rubber-band":!1,value:r.is_overt,loading:r.overt_loading,"onUpdate:value":h},null,8,["value","loading"])]),_:1}),s(u(Z),{label:"全员禁言:",feedback:"开启后除群主和管理员以外，其它成员禁止发言。"},{default:l(()=>[s(u(Te),{"rubber-band":!1,value:r.is_mute,loading:r.mute_loading,"onUpdate:value":_},null,8,["value","loading"])]),_:1})]),_:1})])])}}});const Oo=ne(Ao,[["__scopeId","data-v-fe901343"]]),Go={class:"el-container container-box"},jo={class:"el-aside bdr-r",style:{width:"100px"}},Wo=["textContent","onClick"],Vo={class:"el-main"},Yo=K({__name:"index",props:{gid:{type:Number,default:0}},emits:["close"],setup(o,{emit:p}){const i=p,m=T(!0),r=T(0),f=[{name:"群信息",component:jn},{name:"群成员",component:ro},{name:"群公告",component:xo},{name:"群申请",component:Po},{name:"群设置",component:Oo}],a=()=>{i("close")};return(_,h)=>(k(),X(u(he),{show:m.value,"onUpdate:show":h[0]||(h[0]=c=>m.value=c),preset:"card",title:"群管理",class:"modal-radius",style:{"max-width":"800px"},"on-after-leave":a,segmented:{content:!0},"content-style":{padding:0}},{default:l(()=>[t("section",Go,[t("aside",jo,[(k(),M(q,null,se(f,(c,w)=>t("div",{key:c.name,class:At(["menu-list pointer",{selectd:r.value==w}]),textContent:D(c.name),onClick:R=>r.value=w},null,10,Wo)),64))]),t("main",Vo,[(k(),X(Ot(f[r.value].component),{id:o.gid,onClose:a},null,40,["id"]))])])]),_:1},8,["show"]))}});const Xo=ne(Yo,[["__scopeId","data-v-24983d06"]]),qo={class:"el-container is-vertical section"},Ko={class:"el-header header bdr-b"},Jo={class:"right-icon"},Qo={class:"el-main main me-scrollbar me-scrollbar-thumb"},Zo={class:"info-box"},es={class:"b-box"},ts={class:"describe"},ns={class:"b-box"},os={class:"block"},ss={class:"text"},is={style:{display:"flex"}},as={class:"describe"},rs={class:"b-box"},ls={class:"block"},ds={class:"text"},cs={style:{display:"flex"}},us={class:"describe"},ms={class:"b-box"},vs={class:"block"},ps={class:"text"},fs={class:"b-box"},hs={class:"describe"},_s={class:"b-box"},gs={class:"block"},bs={class:"text"},ws={class:"member-box"},ys={class:"flex"},ks={class:"table"},$s=["onClick"],xs={class:"avatar"},Cs={class:"nickname text-ellipsis"},Ss={class:"badge master"},zs={class:"badge leader"},Ts={class:"card text-ellipsis grey"},Bs={key:0,class:"mt-t20 pd-t20"},Ms={class:"el-footer footer bdr-t"},Rs=K({__name:"GroupPanel",props:{gid:{type:Number,default:0}},emits:["close","to-talk","label"],setup(o,{emit:p}){const i=De(),m=Gt(),r=jt(),{showUserInfoModal:f}=we(),a=p,_=o;Re(_,()=>{v(),C()});const h=T(!1),c=T(!1),w=T(!1),R=T(!1),d=ie({keywords:"",detail:{avatar:"",name:"",profile:"",visit_card:"",notice:"",group_label:""},remark:"",label:""}),g=T([]),b=F(()=>d.keywords?g.value.filter(n=>n.nickname.match(d.keywords)!=null||n.remark.match(d.keywords)!=null):g.value),$=F(()=>g.value.some(n=>n.user_id==i.uid&&n.leader>=1));F(()=>g.value.some(n=>n.user_id==i.uid&&n.leader==2));const x=n=>{R.value=n},j=()=>{},z=n=>{f(n.user_id)};function v(){ge({group_id:_.gid}).then(n=>{if(n.code==200){let e=n.data;d.detail.avatar=e.avatar,d.detail.name=e.group_name,d.detail.profile=e.profile,d.detail.visit_card=e.visit_card,d.remark=e.visit_card,d.detail.group_label=e.group_label,d.label=e.group_label,e.notice&&(d.detail.notice=e.notice)}})}function C(){Ie({group_id:_.gid}).then(n=>{n.code==200&&(g.value=n.data.items||[])})}const O=()=>{a("close")},y=()=>{Wt({group_id:_.gid,visit_card:d.remark}).then(({code:n,message:e})=>{n==200?(h.value.setShow(!1),d.detail.visit_card=d.remark,window.$message.success("已更新群名片"),C()):window.$message.error(e)})},N=()=>{Vt({group_id:_.gid,group_label:d.label}).then(({code:n,message:e})=>{n==200?(c.value.setShow(!1),d.detail.group_label=d.label,m.loadTalkList(),r.setTalk({...r.talk,username:d.label?d.label:d.detail.name}),window.$message.success("已更新群备注"),C()):window.$message.error(e)})};return v(),C(),(n,e)=>{const S=U("n-icon"),E=U("n-button"),H=U("n-input"),J=U("im-avatar");return k(),M(q,null,[t("section",qo,[t("header",Ko,[t("div",{class:"left-icon",onClick:e[0]||(e[0]=I=>a("to-talk"))},[s(S,{size:"21",component:u(hn)},null,8,["component"])]),e[8]||(e[8]=t("div",{class:"center-text"},[t("span",null,"群信息")],-1)),t("div",Jo,[s(S,{size:"21",component:u(Le),onClick:O},null,8,["component"])])]),t("main",Qo,[t("div",Zo,[t("div",es,[e[9]||(e[9]=t("div",{class:"block"},[t("div",{class:"title"},"群名称：")],-1)),t("div",ts,D(d.detail.name),1)]),t("div",ns,[t("div",os,[e[13]||(e[13]=t("div",{class:"title"},"群备注：",-1)),t("div",ss,[s(u(Se),{trigger:"click",placement:"left",ref_key:"editLabelPopover",ref:c},{trigger:l(()=>[s(E,{type:"primary",text:""},{default:l(()=>e[10]||(e[10]=[P(" 设置 ")])),_:1})]),header:l(()=>e[11]||(e[11]=[P(" 设置我的群备注 ")])),default:l(()=>[t("div",is,[s(H,{type:"text",placeholder:"群备注，清空恢复群名称",maxlength:"40",clearable:"",value:d.label,"onUpdate:value":e[1]||(e[1]=I=>d.label=I),onKeydown:Ce(N,["enter"])},null,8,["value"]),s(E,{type:"primary",class:"mt-l5",onClick:N},{default:l(()=>e[12]||(e[12]=[P(" 确定 ")])),_:1})])]),_:1},512)])]),t("div",as,D(d.detail.group_label||"未设置"),1)]),t("div",rs,[t("div",ls,[e[17]||(e[17]=t("div",{class:"title"},"群名片：",-1)),t("div",ds,[s(u(Se),{trigger:"click",placement:"left",ref_key:"editCardPopover",ref:h},{trigger:l(()=>[s(E,{type:"primary",text:""},{default:l(()=>e[14]||(e[14]=[P(" 设置 ")])),_:1})]),header:l(()=>e[15]||(e[15]=[P(" 设置我的群名片 ")])),default:l(()=>[t("div",cs,[s(H,{type:"text",placeholder:"设置我的群名片",maxlength:"10",value:d.remark,"onUpdate:value":e[2]||(e[2]=I=>d.remark=I),onKeydown:Ce(y,["enter"])},null,8,["value"]),s(E,{type:"primary",class:"mt-l5",onClick:y},{default:l(()=>e[16]||(e[16]=[P(" 确定 ")])),_:1})])]),_:1},512)])]),t("div",us,D(d.detail.visit_card||"未设置"),1)]),t("div",ms,[t("div",vs,[e[18]||(e[18]=t("div",{class:"title"},"群成员：",-1)),t("div",ps,D(g.value.length)+"人",1)]),e[19]||(e[19]=t("div",{class:"describe"},"群主已开启“新成员入群可查看所有聊天记录",-1))]),t("div",fs,[e[20]||(e[20]=t("div",{class:"block"},[t("div",{class:"title"},"群简介：")],-1)),t("div",hs,D(d.detail.profile?d.detail.profile:"暂无群简介"),1)]),t("div",_s,[t("div",gs,[e[22]||(e[22]=t("div",{class:"title"},"群公告：",-1)),t("div",bs,[s(E,{type:"primary",text:""},{default:l(()=>e[21]||(e[21]=[P(" 更多 ")])),_:1})])]),e[23]||(e[23]=t("div",{class:"describe"},"暂无群公告",-1))])]),t("div",ws,[t("div",ys,[s(H,{placeholder:"搜索",value:d.keywords,"onUpdate:value":e[3]||(e[3]=I=>d.keywords=I),clearable:!0,round:""},{prefix:l(()=>[s(S,{component:u(le)},null,8,["component"])]),_:1},8,["value"]),s(E,{onClick:e[4]||(e[4]=I=>w.value=!0),circle:"",class:"mt-l15"},{icon:l(()=>[s(S,{component:u(be),color:"rgb(165 165 170)"},null,8,["component"])]),_:1})]),t("div",ks,[e[25]||(e[25]=t("div",{class:"theader"},[t("div",{class:"avatar"}),t("div",{class:"nickname"},"用户昵称"),t("div",{class:"card"},"群名片")],-1)),(k(!0),M(q,null,se(b.value,I=>(k(),M("div",{class:"row pointer",key:I.id,onClick:L=>z(I)},[t("div",xs,[s(J,{size:20,src:I.avatar,username:I.nickname},null,8,["src","username"])]),t("div",Cs,[t("span",null,D(I.nickname?I.nickname:"-"),1),Y(t("span",Ss,"群主",512),[[Q,I.leader===2]]),Y(t("span",zs,"管理员",512),[[Q,I.leader===1]])]),t("div",Ts,D(I.remark||"-"),1)],8,$s))),128)),b.value.length==0?(k(),M("div",Bs,[s(u(Ee),{size:"200",description:"暂无相关数据"},{icon:l(()=>e[24]||(e[24]=[t("img",{src:me,alt:""},null,-1)])),_:1})])):ee("",!0)])])]),t("footer",Ms,[$.value?(k(),X(E,{key:0,class:"btn",type:"primary","text-color":"#ffffff",onClick:e[5]||(e[5]=I=>x(!0))},{default:l(()=>e[26]||(e[26]=[P(" 群聊管理 ")])),_:1})):ee("",!0)])]),w.value?(k(),X(Pe,{key:0,gid:o.gid,onClose:e[6]||(e[6]=I=>w.value=!1),onOnSubmit:j},null,8,["gid"])):ee("",!0),R.value?(k(),X(Xo,{key:1,gid:o.gid,onClose:e[7]||(e[7]=I=>x(!1))},null,8,["gid"])):ee("",!0)],64)}}});const Ws=ne(Rs,[["__scopeId","data-v-7c12ea7e"]]);export{Ws as G,js as N,Zt as a,Pe as b};
