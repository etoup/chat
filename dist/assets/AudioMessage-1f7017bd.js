import{br as k,bs as n,t as L,r as _,bt as M,bH as P,bI as l,bJ as d,bK as t,bY as A,bL as f,ae as C,bT as j,aI as T,D as x,d$ as V,bN as h,bQ as z,bR as W}from"./index-8d305a84.js";const B=k("pause-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),I=k("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),D={class:"im-message-audio"},E=["src"],N={class:"play"},R={class:"desc"},S={class:"time"},$={key:0,class:"im-message-text"},O=L({__name:"AudioMessage",props:{extra:{},data:{},maxWidth:{}},setup(e){const a=_(),c=_("-"),o=M({isAudioPlay:!1,progress:0,duration:0,currentTime:0,loading:!0}),m=()=>{o.isAudioPlay?a.value.pause():a.value.play(),o.isAudioPlay=!o.isAudioPlay},v=()=>{o.isAudioPlay=!1,o.progress=0},y=()=>{o.duration=a.value.duration,c.value=p(parseInt(a.value.duration)),o.loading=!1},g=s=>{console.log("音频播放异常===>",s)},b=()=>{let s=a.value;s.duration==0?o.progress=0:(o.currentTime=s.currentTime,o.progress=s.currentTime/s.duration*100)},p=(s=0)=>{if(s==0)return"-";const i=Math.floor(s/60);let r=s;return i>0&&(r=Math.floor(s-i*60)),`${i}'${r}"`};return(s,i)=>{var u;const r=P("n-icon");return l(),d("div",null,[t("div",D,[t("audio",{ref_key:"audioRef",ref:a,preload:"auto",type:"audio/mp3,audio/wav",src:s.extra.url,onTimeupdate:b,onEnded:v,onCanplay:y,onError:g},null,40,E),t("div",N,[t("div",{class:"btn pointer",onClick:A(m,["stop"])},[n(r,{size:18,component:o.isAudioPlay?f(B):f(I)},null,8,["component"])])]),t("div",R,[(l(),d(C,null,j(23,w=>t("span",{class:"line",key:w})),64)),T(t("span",{class:"indicator",style:V({left:o.progress+"%"})},null,4),[[x,o.progress>0]])]),t("div",S,h(c.value),1)]),(u=s.data)!=null&&u.result?(l(),d("div",$,h(s.data.result),1)):z("",!0)])}}});const F=W(O,[["__scopeId","data-v-a2f5baa7"]]);export{F as default};
