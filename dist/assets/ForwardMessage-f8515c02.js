import{L as R}from"./Loading-1aa29ebc.js";import{t as x,r as d,w as S,bH as h,bI as a,bO as i,bP as $,bK as e,bQ as w,bJ as c,ae as k,bT as y,bL as f,bs as L,bN as r,bU as B,bV as N,ez as V,bR as C,p as D}from"./index-8d305a84.js";import{u as U}from"./useInject-58e6e07a.js";const j={class:"main-box me-scrollbar me-scrollbar-thumb"},z=["onClick"],q={class:"right-box"},E={class:"msg-header"},G={class:"name"},H={class:"time"},J=x({__name:"ForwardRecord",props:{msgId:{type:String,required:!0}},emits:["close"],setup(_,{emit:u}){const l=u,m=_,{showUserInfoModal:p}=U(),t=d(!0),o=d([]),n=d("会话记录"),v=()=>{l("close")},F=()=>{V({msg_id:m.msgId}).then(g=>{g.code==200&&(o.value=g.data.items||[],n.value=`会话记录(${o.value.length})`)})};return S(()=>{F()}),(g,b)=>{const I=h("im-avatar"),M=h("n-modal");return a(),i(M,{show:t.value,"onUpdate:show":b[0]||(b[0]=s=>t.value=s),preset:"card",title:n.value,style:{"max-width":"500px"},class:"modal-radius","on-after-leave":v,segmented:{content:!0},"header-style":{padding:"20px 15px"},"content-style":{padding:0}},{default:$(()=>[e("div",j,[o.value.length===0?(a(),i(R,{key:0})):w("",!0),(a(!0),c(k,null,y(o.value,s=>(a(),c("div",{key:s.msg_id,class:"message-item"},[e("div",{class:"left-box pointer",onClick:T=>f(p)(s.user_id)},[L(I,{src:s.avatar,size:30,username:s.nickname},null,8,["src","username"])],8,z),e("div",q,[e("div",E,[e("span",G,r(s.nickname),1),e("span",H,r(s.created_at),1)]),(a(),i(B(f(N)[s.msg_type]||"unknown-message"),{extra:s.extra,data:s},null,8,["extra","data"]))])]))),128))])]),_:1},8,["show","title"])}}});const K=C(J,[["__scopeId","data-v-7e1fb1ba"]]),O={class:"title"},P={class:"tips"},Q=x({__name:"ForwardMessage",props:{extra:{},data:{},maxWidth:{}},setup(_){const u=_,l=d(!1),m=D(()=>[...new Set(u.extra.records.map(t=>t.nickname))].join("、")),p=()=>{l.value=!0};return(t,o)=>(a(),c("section",{class:"im-message-forward pointer",onClick:p},[e("div",O,r(m.value)+" 的会话记录",1),(a(!0),c(k,null,y(t.extra.records,(n,v)=>(a(),c("div",{class:"list",key:v},[e("p",null,[e("span",null,r(n.nickname)+": ",1),e("span",null,r(n.text),1)])]))),128)),e("div",P,[e("span",null,"转发：聊天会话记录 ("+r(t.extra.msg_ids.length)+"条)",1)]),l.value?(a(),i(K,{key:0,"msg-id":t.data.msg_id,onClose:o[0]||(o[0]=n=>l.value=!1)},null,8,["msg-id"])):w("",!0)]))}});const Y=C(Q,[["__scopeId","data-v-4a8c7b57"]]);export{Y as default};
