import{t as C,r as h,bH as y,bI as u,bO as x,bP as r,bK as n,bs as s,bW as w,bL as i,aW as I,c1 as G,dQ as $,bt as N,bJ as b,bN as A,ae as S,bT as L,aI as B,D,bQ as J,dR as V,d6 as F,bR as M}from"./index-8d305a84.js";import{_ as O}from"./no-data-bde0995b.js";import{a as Q,N as R}from"./FormItem-742d2080.js";import{G as T}from"./GroupCard-93c3f7ab.js";import{N as U,A as W}from"./AddOne-2b277f35.js";import{S as q}from"./Search-6c0eed6a.js";import"./PeoplePlusOne-a21a6ea6.js";const z={style:{width:"100%","text-align":"right"}},E=C({__name:"GroupApply",props:{gid:{type:Number,default:0}},emits:["close"],setup(k,{emit:d}){const e=h(""),p=k,c=d,g=h(!0),m=h(!1),_=()=>{c("close")},a=()=>{m.value=!0;let t=$({group_id:p.gid,remark:e.value});t.then(o=>{o.code==200?(window.$message.success("入群申请提交成功..."),_()):window.$message.warning(o.message)}),t.finally(()=>{m.value=!1})};return(t,o)=>{const v=y("n-button");return u(),x(i(G),{show:g.value,"onUpdate:show":o[1]||(o[1]=f=>g.value=f),preset:"card",title:"入群申请",class:"modal-radius",style:{"max-width":"450px"},"on-after-leave":_},{footer:r(()=>[n("div",z,[s(v,{type:"tertiary",onClick:_},{default:r(()=>o[2]||(o[2]=[w(" 取消 ")])),_:1}),s(v,{type:"primary",class:"mt-l15",loading:m.value,disabled:!e.value,onClick:a},{default:r(()=>o[3]||(o[3]=[w(" 提交 ")])),_:1},8,["loading","disabled"])])]),default:r(()=>[s(i(R),null,{default:r(()=>[s(i(Q),{label:"申请备注",required:""},{default:r(()=>[s(i(I),{placeholder:"请填写申请备注",type:"textarea",value:e.value,"onUpdate:value":o[0]||(o[0]=f=>e.value=f)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])}}}),H={class:"el-container height100"},K={class:"el-main"},P={class:"el-container is-vertical height100"},j={class:"el-header me-view-header bdr-b"},X={key:0,class:"el-main flex-center"},Y={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10"},Z={class:"cards"},ee=C({__name:"open-group",setup(k){const d=N({isShow:!1,groupId:0}),e=N({page:1,name:"",next:!1,loading:!1}),p=h([]),c=()=>{e.loading||(e.loading=!0,V({page:e.page,name:e.name}).then(a=>{if(a.code==200){let t=a.data.items||[];e.page==1?p.value=t:p.value.push(...t),e.next=a.data.next}}).finally(()=>{e.loading=!1}))},g=()=>{e.page++,c()},m=F(a=>{e.page=1,e.name=a,c()},300),_=a=>{d.isShow=!0,d.groupId=a.id};return c(),(a,t)=>{const o=y("n-icon"),v=y("n-input"),f=y("n-empty");return u(),b(S,null,[n("section",H,[n("main",K,[n("section",P,[n("header",j,[n("div",null,"公开群聊("+A(p.value.length)+")",1),n("div",null,[s(v,{placeholder:"搜索",clearable:"",style:{width:"200px"},"on-input":i(m),round:""},{prefix:r(()=>[s(o,{component:i(q)},null,8,["component"])]),_:1},8,["on-input"])])]),p.value.length==0?(u(),b("main",X,[s(f,{size:"200",description:"暂无相关数据"},{icon:r(()=>t[1]||(t[1]=[n("img",{src:O,alt:""},null,-1)])),_:1})])):(u(),b("main",Y,[s(i(U),{type:"info",bordered:!1,closable:"",class:"mt-b10"},{default:r(()=>t[2]||(t[2]=[w(" 公开群聊可自行添加入群申请，待群主（管理员）同意后方可入群！ ")])),_:1}),n("div",Z,[(u(!0),b(S,null,L(p.value,l=>(u(),x(T,{key:l.id,avatar:l.avatar,username:l.name,gender:l.gender,motto:l.profile,flag:l.count+"/"+l.max_num,onJoin:te=>_(l)},null,8,["avatar","username","gender","motto","flag","onJoin"]))),128)),B(n("div",{class:"flex-center more",onClick:g},[s(o,{component:i(W)},null,8,["component"]),t[3]||(t[3]=w("  加载更多 "))],512),[[D,e.next]])])]))])])]),d.isShow?(u(),x(E,{key:0,gid:d.groupId,onClose:t[0]||(t[0]=l=>d.isShow=!1)},null,8,["gid"])):J("",!0)],64)}}});const de=M(ee,[["__scopeId","data-v-59a9f623"]]);export{de as default};
