import{_ as O}from"./no-data-bde0995b.js";import{t as j,d7 as M,cN as R,bv as z,r as c,bt as E,p as N,w as F,bH as m,bI as l,bJ as v,bK as i,bs as a,bP as r,bL as n,bW as g,bN as k,c0 as H,ae as y,bT as J,bO as G,bQ as K,cm as Q,bR as W}from"./index-8d305a84.js";import{b as q,G as A,N as X}from"./GroupPanel-7cf07086.js";import{G as Y}from"./GroupCard-93c3f7ab.js";import{b as w,N as Z}from"./Tabs-c78031bf.js";import{S as ee}from"./Search-6c0eed6a.js";import{P as oe}from"./Plus-9d1366a5.js";import"./Checkbox-f0418712.js";import"./Scrollbar-97004e60.js";import"./FormItem-742d2080.js";import"./AvatarCropper-1987087f.js";import"./Close-e5fa65a5.js";import"./UploadOne-235eef33.js";import"./useInject-58e6e07a.js";import"./CheckSmall-880f6223.js";import"./Switch-42f61b41.js";import"./PeoplePlusOne-a21a6ea6.js";const te={id:"drawer-target",class:"el-container is-vertical height100"},ae={class:"el-header me-view-header bdr-b"},ne={key:0,class:"el-main flex-center"},re={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10"},se={class:"cards"},le=j({__name:"groups",setup(ue){const h=M(),L=R(),_=z(),d=c(!1),f=c(""),u=c([]),s=E({isShow:!1,id:0}),p=c("all"),b=L.uid,S=N(()=>u.value.filter(t=>t.creator_id==b)),C=N(()=>u.value.filter(t=>p.value=="create"&&t.creator_id!=b||p.value=="join"&&t.creator_id==b?!1:t.group_name.toLowerCase().indexOf(f.value.toLowerCase())!=-1)),T=()=>{Q().then(t=>{t.code==200&&(u.value=t.data.items||[])})},B=t=>{s.isShow=!0,s.id=t.id},$=t=>{_.toTalk(2,t.id,h)},P=()=>{d.value=!1,T(),_.loadTalkList()};return F(()=>{T()}),(t,o)=>{const x=m("n-icon"),U=m("n-input"),V=m("n-button"),D=m("n-empty");return l(),v(y,null,[i("section",te,[i("header",ae,[i("div",null,[a(n(Z),{value:p.value,"onUpdate:value":o[0]||(o[0]=e=>p.value=e)},{default:r(()=>[a(n(w),{name:"all"},{default:r(()=>[g(" 全部群聊("+k(u.value.length)+") ",1)]),_:1}),a(n(w),{name:"create"},{default:r(()=>[g(" 我创建的("+k(S.value.length)+") ",1)]),_:1}),a(n(w),{name:"join"},{default:r(()=>[g(" 我加入的("+k(u.value.length-S.value.length)+") ",1)]),_:1})]),_:1},8,["value"])]),a(n(H),null,{default:r(()=>[a(U,{value:f.value,"onUpdate:value":o[1]||(o[1]=e=>f.value=e),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{"max-width":"200px"},round:""},{prefix:r(()=>[a(x,{component:n(ee)},null,8,["component"])]),_:1},8,["value"]),a(V,{circle:"",onClick:o[2]||(o[2]=e=>d.value=!0)},{icon:r(()=>[a(x,{component:n(oe)},null,8,["component"])]),_:1})]),_:1})]),C.value.length==0?(l(),v("main",ne,[a(D,{size:"200",description:"暂无相关数据"},{icon:r(()=>o[7]||(o[7]=[i("img",{src:O,alt:""},null,-1)])),_:1})])):(l(),v("main",re,[i("div",se,[(l(!0),v(y,null,J(C.value,e=>(l(),G(Y,{key:e.id,avatar:e.avatar,username:e.group_name,gender:e.gender,motto:e.profile,flag:"查看","is-member":!0,onClick:I=>B(e),onTalk:I=>$(e)},null,8,["avatar","username","gender","motto","onClick","onTalk"]))),128))])]))]),d.value?(l(),G(q,{key:0,onClose:o[3]||(o[3]=e=>d.value=!1),onOnSubmit:P})):K("",!0),a(n(X),{show:s.isShow,"onUpdate:show":o[6]||(o[6]=e=>s.isShow=e),width:400,placement:"right","trap-focus":!1,"block-scroll":!1,to:"#drawer-target","show-mask":"transparent"},{default:r(()=>[a(A,{gid:s.id,onClose:o[4]||(o[4]=e=>s.isShow=!1),onToTalk:o[5]||(o[5]=e=>n(_).toTalk(2,s.id,n(h)))},null,8,["gid"])]),_:1},8,["show"])],64)}}});const Ne=W(le,[["__scopeId","data-v-e48eeccb"]]);export{Ne as default};
