import{bR as G,bH as m,bI as u,bJ as p,bK as o,bs as r,bN as h,aI as D,D as P,bL as i,dE as O,bY as j,t as R,d7 as U,dY as q,cN as E,bv as F,r as g,bt as Q,p as V,w as Y,e0 as z,C as H,bP as b,c0 as J,ae as C,bT as K,bO as A,cm as W}from"./index-8d305a84.js";import{P as X}from"./PeoplePlusOne-a21a6ea6.js";import{G as Z,N as ee}from"./GroupPanel-7cf07086.js";import{S as te}from"./Search-6c0eed6a.js";import"./no-data-bde0995b.js";import"./Checkbox-f0418712.js";import"./Scrollbar-97004e60.js";import"./FormItem-742d2080.js";import"./Plus-9d1366a5.js";import"./AvatarCropper-1987087f.js";import"./Close-e5fa65a5.js";import"./UploadOne-235eef33.js";import"./useInject-58e6e07a.js";import"./CheckSmall-880f6223.js";import"./Switch-42f61b41.js";const oe={class:"items-box"},se={class:"left-item"},ae={class:"right-item"},ne={class:"username"},re={class:"text-ellipsis"},le={class:"badge"},ie={class:"flags text-ellipsis"},ue={class:"helper"},ce={class:"status"},de={class:"tool"},pe={__name:"GroupCard",props:{avatar:{type:String,default:""},username:{type:String,default:""},gender:{type:Number,default:0},motto:{type:String,default:""},flag:{type:String,default:""},isMember:{type:Boolean,default:!1},isQiye:{type:Boolean,default:!1}},emits:["talk","join"],setup(n,{emit:_}){const f=_;return(w,c)=>{const d=m("im-avatar"),v=m("n-icon");return u(),p("div",oe,[o("div",se,[r(d,{src:n.avatar,size:40,username:n.username},null,8,["src","username"])]),o("div",ae,[o("div",ne,[o("span",re,h(n.username||"-"),1),D(o("span",le,"企业",512),[[P,n.isQiye]])]),o("div",ie,h(n.motto||"..."),1),o("div",ue,[o("div",ce,h(n.flag),1),o("div",de,[r(v,{component:n.isMember?i(O):i(X),onClick:c[0]||(c[0]=j(a=>f(n.isMember?"talk":"join"),["stop"]))},null,8,["component"])])])])])}}},me=G(pe,[["__scopeId","data-v-60a6ffb5"]]),_e={id:"drawer-target",class:"el-container is-vertical h-full"},fe={class:"el-header me-view-header border-bottom"},ve={key:0,class:"el-main flex-center"},ge={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10",id:"drawer-container"},he={class:"cards"},be=R({name:"ContactGroup",__name:"group",setup(n){const _=U(),f=q(),w=E(),c=F(),d=g(""),v=g([]),a=g(null),l=Q({isShow:!1,group_id:0}),y=g("all"),S=w.uid,k=V(()=>v.value.filter(e=>{if(a.value&&a.value.length>0){if(!a.value.includes(e.id))return!1}else if(a.value&&a.value.length==0)return!1;return y.value=="create"&&e.creator_id!=S||y.value=="join"&&e.creator_id==S?!1:e.group_name.toLowerCase().indexOf(d.value.toLowerCase())!=-1})),$=async()=>{const e=await W();e.code===200&&(v.value=e.data.items||[])},I=e=>{console.log("item",e),l.isShow=!0,l.group_id=e.id},T=e=>{c.toTalk(2,e.id,_)};Y(()=>{$();const e=f.query.sort_id;e?x(parseInt(e)):a.value=null});const x=async e=>{const s=await z({group_sort_id:e});s.code===200?a.value=s.data||[]:a.value=[]};return H(()=>f.query.sort_id,e=>{e?x(parseInt(String(e))):a.value=null}),(e,s)=>{const N=m("n-icon"),B=m("n-input"),L=m("n-empty");return u(),p(C,null,[o("section",_e,[o("header",fe,[r(i(J),null,{default:b(()=>[r(B,{value:d.value,"onUpdate:value":s[0]||(s[0]=t=>d.value=t),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{"max-width":"200px"},round:""},{prefix:b(()=>[r(N,{component:i(te)},null,8,["component"])]),_:1},8,["value"])]),_:1})]),k.value.length==0?(u(),p("main",ve,[r(L,{description:"暂无相关数据"})])):(u(),p("main",ge,[o("div",he,[(u(!0),p(C,null,K(k.value,t=>(u(),A(me,{key:t.key_id,avatar:t.avatar,username:t.group_name,gender:t.gender,motto:t.profile,flag:"查看","is-member":!0,onClick:M=>I(t),onTalk:M=>T(t)},null,8,["avatar","username","gender","motto","onClick","onTalk"]))),128))])]))]),r(i(ee),{show:l.isShow,"onUpdate:show":s[3]||(s[3]=t=>l.isShow=t),width:400,placement:"right","trap-focus":!1,"block-scroll":!1,to:"#drawer-target","show-mask":"transparent"},{default:b(()=>[r(Z,{gid:l.group_id,onClose:s[1]||(s[1]=t=>l.isShow=!1),onToTalk:s[2]||(s[2]=t=>i(c).toTalk(2,l.group_id,i(_)))},null,8,["gid"])]),_:1},8,["show"])],64)}}});const Pe=G(be,[["__scopeId","data-v-01d450e9"]]);export{Pe as default};
