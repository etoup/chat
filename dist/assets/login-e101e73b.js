import{t as y,cN as k,dY as h,d7 as N,r as C,bt as R,bH as f,bI as S,bJ as B,bK as p,bs as t,bP as a,bL as l,cf as g,bW as c,dZ as K,d_ as V,cB as $,bR as I}from"./index-8d305a84.js";import{S as L}from"./auth-7adda57d.js";import{a as _,N as U}from"./FormItem-742d2080.js";const q={class:"el-container is-vertical login-box login"},z={class:"el-main",style:{padding:"3px"}},F={class:"helper"},T=y({__name:"login",setup(A){const w=k(),b=h(),i=N(),m=C(),v={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},s=R({username:"",password:"",loading:!1}),x=()=>{var n;const d=((n=b.params)==null?void 0:n.redirect)||"/";s.loading=!0;const e=L({account:s.username,password:s.password,platform:"web"});e.then(async o=>{o.code==200?(window.$message.success("登录成功"),V(o.data.access_token,o.data.expires_in),$.connect(),w.loadSetting(),i.push(d)):window.$message.warning(o.message)}),e.finally(()=>{s.loading=!1})},u=d=>{d.preventDefault(),K(!0),m.value.validate(e=>{!e&&x()})};return(d,e)=>{const n=f("n-input"),o=f("n-button");return S(),B("section",q,[e[7]||(e[7]=p("header",{class:"el-header box-header"},"快捷登录",-1)),p("main",z,[t(l(U),{ref_key:"formRef",ref:m,size:"large",model:s,rules:v},{default:a(()=>[t(l(_),{path:"username","show-label":!1},{default:a(()=>[t(n,{placeholder:"请输入手机号/用户名",value:s.username,"onUpdate:value":e[0]||(e[0]=r=>s.username=r),maxlength:11,onKeydown:g(u,["enter"])},null,8,["value"])]),_:1}),t(l(_),{path:"password","show-label":!1},{default:a(()=>[t(n,{placeholder:"请输入密码",type:"password","show-password-on":"click",value:s.password,"onUpdate:value":e[1]||(e[1]=r=>s.password=r),onKeydown:g(u,["enter"])},null,8,["value"])]),_:1}),t(o,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:u,loading:s.loading},{default:a(()=>e[4]||(e[4]=[c(" 立即登录 ")])),_:1},8,["loading"])]),_:1},8,["model"]),p("div",F,[t(o,{text:"",color:"#646cff",onClick:e[2]||(e[2]=r=>l(i).push("/auth/forget"))},{default:a(()=>e[5]||(e[5]=[c(" 找回密码 ")])),_:1}),t(o,{text:"",color:"#646cff",onClick:e[3]||(e[3]=r=>l(i).push("/auth/register"))},{default:a(()=>e[6]||(e[6]=[c(" 还没有账号？立即注册 ")])),_:1})])])])}}});const J=I(T,[["__scopeId","data-v-d769bc3f"]]);export{J as default};
