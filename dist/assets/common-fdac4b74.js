var m=Object.defineProperty;var c=(t,e,i)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var r=(t,e,i)=>(c(t,typeof e!="symbol"?e+"":e,i),i);import{bF as o}from"./index-8d305a84.js";class n{constructor(e,i=60,s){r(this,"timer",null);r(this,"lockTime",60);r(this,"lockName","");r(this,"callBack");this.lockTime=i,this.lockName=`SMSLOCK_${e}`,this.callBack=s,this.compute()}start(){localStorage.setItem(this.lockName,`${this.getCurrentTime()+this.lockTime}`),this.compute()}compute(){this.clear();const e=this.getExpireTime();if(e===null)return;if(e<=this.getCurrentTime()){this.callBack(0),localStorage.removeItem(this.lockName);return}const i=e-this.getCurrentTime();this.callBack(i),this.timer=setTimeout(()=>this.compute(),1e3)}getCurrentTime(){return Math.floor(new Date().getTime()/1e3)}getExpireTime(){return localStorage.getItem(this.lockName)}clear(){this.timer&&clearTimeout(this.timer)}}const h=t=>/^1[0-9]{10}$/.test(t),u=t=>o("/api/v1/common/sms-code",t),k=t=>o("/api/v1/common/email-code",t);export{n as S,u as a,k as b,h as i};
