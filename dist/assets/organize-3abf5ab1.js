import{_ as nt}from"./no-data-bde0995b.js";import{t as ce,y as x,ar as pn,F as pe,r as F,H as en,bn as tt,a3 as lt,N as ot,p as z,s as at,I as H,w as it,be as rt,a6 as Be,b7 as Nn,ai as dt,J as I,M as ne,L as B,bj as gn,K as ke,O as me,bk as st,R as ct,U as ut,Q as Cn,as as vn,a9 as _e,V as T,az as $e,C as je,X as ft,$ as ht,_ as nn,Y as Te,a1 as gt,a5 as bn,ds as yn,dt as vt,x as ze,du as kn,at as q,a7 as an,br as bt,bs as te,bG as Rn,bR as yt,d7 as kt,cN as mt,bv as xt,bH as tn,bI as xe,bJ as Le,bK as we,bN as mn,bP as ln,ae as wt,bT as pt,bL as Me,bQ as Nt,bO as Ct}from"./index-8d305a84.js";import{M as Rt}from"./MemberCard-fcbcb197.js";import{u as St}from"./useInject-58e6e07a.js";import{S as Kt}from"./Search-6c0eed6a.js";import{N as Dt}from"./Checkbox-f0418712.js";import{V as _t}from"./VirtualList-0388670a.js";function Sn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const Tt=ce({name:"Switcher",render(){return x("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},x("path",{d:"M12 8l10 8l-10 8z"}))}}),Kn=pn("n-tree-select");function xn({position:e,offsetLevel:l,indent:c,el:u}){const s={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")s.left=0,s.top=0,s.bottom=0,s.borderRadius="inherit",s.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const a=e==="before"?"top":"bottom";s[a]=0,s.left=`${u.offsetLeft+6-l*c}px`,s.height="2px",s.backgroundColor="var(--n-drop-mark-color)",s.transformOrigin=a,s.borderRadius="1px",s.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return x("div",{style:s})}function Lt({dropPosition:e,node:l}){return l.isLeaf===!1||l.children?!0:e!=="inside"}const Ee=pn("n-tree");function Et({props:e,fNodesRef:l,mergedExpandedKeysRef:c,mergedSelectedKeysRef:u,mergedCheckedKeysRef:s,handleCheck:a,handleSelect:y,handleSwitcherClick:k}){const{value:m}=u,w=pe(Kn,null),b=w?w.pendingNodeKeyRef:F(m.length?m[m.length-1]:null);function A(N){var E;if(!e.keyboard)return{enterBehavior:null};const{value:R}=b;let C=null;if(R===null){if((N.key==="ArrowDown"||N.key==="ArrowUp")&&N.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(N.key)&&R===null){const{value:v}=l;let f=0;for(;f<v.length;){if(!v[f].disabled){b.value=v[f].key;break}f+=1}}}else{const{value:v}=l;let f=v.findIndex(h=>h.key===R);if(!~f)return{enterBehavior:null};if(N.key==="Enter"){const h=v[f];switch(C=((E=e.overrideDefaultNodeClickBehavior)===null||E===void 0?void 0:E.call(e,{option:h.rawNode}))||null,C){case"toggleCheck":a(h,!s.value.includes(h.key));break;case"toggleSelect":y(h);break;case"toggleExpand":k(h);break;case"none":break;case"default":default:C="default",y(h)}}else if(N.key==="ArrowDown")for(N.preventDefault(),f+=1;f<v.length;){if(!v[f].disabled){b.value=v[f].key;break}f+=1}else if(N.key==="ArrowUp")for(N.preventDefault(),f-=1;f>=0;){if(!v[f].disabled){b.value=v[f].key;break}f-=1}else if(N.key==="ArrowLeft"){const h=v[f];if(h.isLeaf||!c.value.includes(R)){const g=h.getParent();g&&(b.value=g.key)}else k(h)}else if(N.key==="ArrowRight"){const h=v[f];if(h.isLeaf)return{enterBehavior:null};if(!c.value.includes(R))k(h);else for(f+=1;f<v.length;){if(!v[f].disabled){b.value=v[f].key;break}f+=1}}}return{enterBehavior:C}}return{pendingNodeKeyRef:b,handleKeydown:A}}const At=ce({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const l=pe(Ee);function c(s){const{onCheck:a}=e;a&&a(s)}function u(s){c(s)}return{handleUpdateValue:u,mergedTheme:l.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:l,checked:c,indeterminate:u,disabled:s,focusable:a,indent:y,handleUpdateValue:k}=this;return x("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${y}px`},"data-checkbox":!0},x(Dt,{focusable:a,disabled:s,theme:l.peers.Checkbox,themeOverrides:l.peerOverrides.Checkbox,checked:c,indeterminate:u,onUpdateChecked:k}))}}),Pt=ce({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:l,renderPrefixRef:c,renderSuffixRef:u,labelFieldRef:s}=pe(Ee),a=F(null);function y(m){const{onClick:w}=e;w&&w(m)}function k(m){y(m)}return{selfRef:a,renderLabel:l,renderPrefix:c,renderSuffix:u,labelField:s,handleClick:k}},render(){const{clsPrefix:e,labelField:l,nodeProps:c,checked:u=!1,selected:s=!1,renderLabel:a,renderPrefix:y,renderSuffix:k,handleClick:m,onDragstart:w,tmNode:{rawNode:b,rawNode:{prefix:A,suffix:N,[l]:E}}}=this;return x("span",Object.assign({},c,{ref:"selfRef",class:[`${e}-tree-node-content`,c==null?void 0:c.class],onClick:m,draggable:w===void 0?void 0:!0,onDragstart:w}),y||A?x("div",{class:`${e}-tree-node-content__prefix`},y?y({option:b,selected:s,checked:u}):en(A)):null,x("div",{class:`${e}-tree-node-content__text`},a?a({option:b,selected:s,checked:u}):en(E)),k||N?x("div",{class:`${e}-tree-node-content__suffix`},k?k({option:b,selected:s,checked:u}):en(N)):null)}}),Ft=ce({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:l}=pe(Ee,null);return()=>{const{clsPrefix:c,expanded:u,hide:s,indent:a,onClick:y}=e;return x("span",{"data-switcher":!0,class:[`${c}-tree-node-switcher`,u&&`${c}-tree-node-switcher--expanded`,s&&`${c}-tree-node-switcher--hide`],style:{width:`${a}px`},onClick:y},x("div",{class:`${c}-tree-node-switcher__icon`},x(tt,null,{default:()=>{if(e.loading)return x(lt,{clsPrefix:c,key:"loading",radius:85,strokeWidth:20});const{value:k}=l;return k?k({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):x(ot,{clsPrefix:c,key:"switcher"},{default:()=>x(Tt,null)})}})))}}});function Ot(e){return z(()=>e.leafOnly?"child":e.checkStrategy)}function re(e,l){return!!e.rawNode[l]}function Dn(e,l,c,u){e==null||e.forEach(s=>{c(s),Dn(s[l],l,c,u),u(s)})}function It(e,l,c,u,s){const a=new Set,y=new Set,k=[];return Dn(e,u,m=>{if(k.push(m),s(l,m)){y.add(m[c]);for(let w=k.length-2;w>=0;--w)if(!a.has(k[w][c]))a.add(k[w][c]);else return}},()=>{k.pop()}),{expandedKeys:Array.from(a),highlightKeySet:y}}if(at&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Bt(e,l,c,u,s){const a=new Set,y=new Set,k=new Set,m=[],w=[],b=[];function A(E){E.forEach(R=>{if(b.push(R),l(c,R)){a.add(R[u]),k.add(R[u]);for(let v=b.length-2;v>=0;--v){const f=b[v][u];if(!y.has(f))y.add(f),a.has(f)&&a.delete(f);else break}}const C=R[s];C&&A(C),b.pop()})}A(e);function N(E,R){E.forEach(C=>{const v=C[u],f=a.has(v),h=y.has(v);if(!f&&!h)return;const g=C[s];if(g)if(f)R.push(C);else{m.push(v);const p=Object.assign(Object.assign({},C),{[s]:[]});R.push(p),N(g,p[s])}else R.push(C)})}return N(e,w),{filteredTree:w,highlightKeySet:k,expandedKeys:m}}const $t=ce({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const l=pe(Ee),{droppingNodeParentRef:c,droppingMouseNodeRef:u,draggingNodeRef:s,droppingPositionRef:a,droppingOffsetLevelRef:y,nodePropsRef:k,indentRef:m,blockLineRef:w,checkboxPlacementRef:b,checkOnClickRef:A,disabledFieldRef:N,showLineRef:E,renderSwitcherIconRef:R,overrideDefaultNodeClickBehaviorRef:C}=l,v=H(()=>!!e.tmNode.rawNode.checkboxDisabled),f=H(()=>re(e.tmNode,N.value)),h=H(()=>l.disabledRef.value||f.value),g=z(()=>{const{value:i}=k;if(i)return i({option:e.tmNode.rawNode})}),p=F(null),$={value:null};it(()=>{$.value=p.value.$el});function K(){const i=()=>{const{tmNode:S}=e;if(!S.isLeaf&&!S.shallowLoaded){if(!l.loadingKeysRef.value.has(S.key))l.loadingKeysRef.value.add(S.key);else return;const{onLoadRef:{value:P}}=l;P&&P(S.rawNode).then(j=>{j!==!1&&l.handleSwitcherClick(S)}).finally(()=>{l.loadingKeysRef.value.delete(S.key)})}else l.handleSwitcherClick(S)};R.value?setTimeout(i,0):i()}const L=H(()=>!f.value&&l.selectableRef.value&&(l.internalTreeSelect?l.mergedCheckStrategyRef.value!=="child"||l.multipleRef.value&&l.cascadeRef.value||e.tmNode.isLeaf:!0)),X=H(()=>l.checkableRef.value&&(l.cascadeRef.value||l.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),Ne=H(()=>l.displayedCheckedKeysRef.value.includes(e.tmNode.key)),de=H(()=>{const{value:i}=X;if(!i)return!1;const{value:S}=A,{tmNode:P}=e;return typeof S=="boolean"?!P.disabled&&S:S(e.tmNode.rawNode)});function Ce(i){const{value:S}=l.expandOnClickRef,{value:P}=L,{value:j}=de;if(!P&&!S&&!j||Be(i,"checkbox")||Be(i,"switcher"))return;const{tmNode:U}=e;P&&l.handleSelect(U),S&&!U.isLeaf&&K(),j&&le(!Ne.value)}function Re(i){var S,P;if(!(Be(i,"checkbox")||Be(i,"switcher"))){if(!h.value){const j=C.value;let U=!1;if(j)switch(j({option:e.tmNode.rawNode})){case"toggleCheck":U=!0,le(!Ne.value);break;case"toggleSelect":U=!0,l.handleSelect(e.tmNode);break;case"toggleExpand":U=!0,K(),U=!0;break;case"none":U=!0,U=!0;return}U||Ce(i)}(P=(S=g.value)===null||S===void 0?void 0:S.onClick)===null||P===void 0||P.call(S,i)}}function Ue(i){w.value||Re(i)}function Y(i){w.value&&Re(i)}function le(i){l.handleCheck(e.tmNode,i)}function oe(i){l.handleDragStart({event:i,node:e.tmNode})}function He(i){i.currentTarget===i.target&&l.handleDragEnter({event:i,node:e.tmNode})}function J(i){i.preventDefault(),l.handleDragOver({event:i,node:e.tmNode})}function ae(i){l.handleDragEnd({event:i,node:e.tmNode})}function Se(i){i.currentTarget===i.target&&l.handleDragLeave({event:i,node:e.tmNode})}function Ve(i){i.preventDefault(),a.value!==null&&l.handleDrop({event:i,node:e.tmNode,dropPosition:a.value})}const qe=z(()=>{const{clsPrefix:i}=e,{value:S}=m;if(E.value){const P=[];let j=e.tmNode.parent;for(;j;)j.isLastChild?P.push(x("div",{class:`${i}-tree-node-indent`},x("div",{style:{width:`${S}px`}}))):P.push(x("div",{class:[`${i}-tree-node-indent`,`${i}-tree-node-indent--show-line`]},x("div",{style:{width:`${S}px`}}))),j=j.parent;return P.reverse()}else return rt(e.tmNode.level,x("div",{class:`${e.clsPrefix}-tree-node-indent`},x("div",{style:{width:`${S}px`}})))});return{showDropMark:H(()=>{const{value:i}=s;if(!i)return;const{value:S}=a;if(!S)return;const{value:P}=u;if(!P)return;const{tmNode:j}=e;return j.key===P.key}),showDropMarkAsParent:H(()=>{const{value:i}=c;if(!i)return!1;const{tmNode:S}=e,{value:P}=a;return P==="before"||P==="after"?i.key===S.key:!1}),pending:H(()=>l.pendingNodeKeyRef.value===e.tmNode.key),loading:H(()=>l.loadingKeysRef.value.has(e.tmNode.key)),highlight:H(()=>{var i;return(i=l.highlightKeySetRef.value)===null||i===void 0?void 0:i.has(e.tmNode.key)}),checked:Ne,indeterminate:H(()=>l.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:H(()=>l.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:H(()=>l.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:h,checkable:X,mergedCheckOnClick:de,checkboxDisabled:v,selectable:L,expandOnClick:l.expandOnClickRef,internalScrollable:l.internalScrollableRef,draggable:l.draggableRef,blockLine:w,nodeProps:g,checkboxFocusable:l.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:y,indent:m,checkboxPlacement:b,showLine:E,contentInstRef:p,contentElRef:$,indentNodes:qe,handleCheck:le,handleDrop:Ve,handleDragStart:oe,handleDragEnter:He,handleDragOver:J,handleDragEnd:ae,handleDragLeave:Se,handleLineClick:Y,handleContentClick:Ue,handleSwitcherClick:K}},render(){const{tmNode:e,clsPrefix:l,checkable:c,expandOnClick:u,selectable:s,selected:a,checked:y,highlight:k,draggable:m,blockLine:w,indent:b,indentNodes:A,disabled:N,pending:E,internalScrollable:R,nodeProps:C,checkboxPlacement:v}=this,f=m&&!N?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,h=R?Sn(e.key):void 0,g=v==="right",p=c?x(At,{indent:b,right:g,focusable:this.checkboxFocusable,disabled:N||this.checkboxDisabled,clsPrefix:l,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return x("div",Object.assign({class:`${l}-tree-node-wrapper`},f),x("div",Object.assign({},w?C:void 0,{class:[`${l}-tree-node`,{[`${l}-tree-node--selected`]:a,[`${l}-tree-node--checkable`]:c,[`${l}-tree-node--highlight`]:k,[`${l}-tree-node--pending`]:E,[`${l}-tree-node--disabled`]:N,[`${l}-tree-node--selectable`]:s,[`${l}-tree-node--clickable`]:s||u||this.mergedCheckOnClick},C==null?void 0:C.class],"data-key":h,draggable:m&&w,onClick:this.handleLineClick,onDragstart:m&&w&&!N?this.handleDragStart:void 0}),A,e.isLeaf&&this.showLine?x("div",{class:[`${l}-tree-node-indent`,`${l}-tree-node-indent--show-line`,e.isLeaf&&`${l}-tree-node-indent--is-leaf`,e.isLastChild&&`${l}-tree-node-indent--last-child`]},x("div",{style:{width:`${b}px`}})):x(Ft,{clsPrefix:l,expanded:this.expanded,selected:a,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:b,onClick:this.handleSwitcherClick}),g?null:p,x(Pt,{ref:"contentInstRef",clsPrefix:l,checked:y,selected:a,onClick:this.handleContentClick,nodeProps:w?void 0:C,onDragstart:m&&!w&&!N?this.handleDragStart:void 0,tmNode:e}),m?this.showDropMark?xn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:b}):this.showDropMarkAsParent?xn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:b}):null:null,g?p:null))}}),_n=$t,jt=ce({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return x(dt,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>x("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:Nn(this.height)}},this.nodes.map(l=>x(_n,{clsPrefix:e,tmNode:l})))})}}),on=st(),zt=I("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ne("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ne(">",[I("tree-node",[ne("&:first-child","margin-top: 0;")])]),I("tree-motion-wrapper",[B("expand",[gn({duration:"0.2s"})]),B("collapse",[gn({duration:"0.2s",reverse:!0})])]),I("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),I("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[B("highlight",[I("tree-node-content",[ke("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),B("disabled",[I("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),me("disabled",[B("clickable",[I("tree-node-content",`
 cursor: pointer;
 `)])])]),B("block-node",[I("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),me("block-line",[I("tree-node",[me("disabled",[I("tree-node-content",[ne("&:hover","background: var(--n-node-color-hover);")]),B("selectable",[I("tree-node-content",[ne("&:active","background: var(--n-node-color-pressed);")])]),B("pending",[I("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),B("selected",[I("tree-node-content","background: var(--n-node-color-active);")])]),B("selected",[I("tree-node-content","background: var(--n-node-color-active);")])])]),B("block-line",[I("tree-node",[me("disabled",[ne("&:hover","background: var(--n-node-color-hover);"),B("pending",`
 background: var(--n-node-color-hover);
 `),B("selectable",[me("selected",[ne("&:active","background: var(--n-node-color-pressed);")])]),B("selected","background: var(--n-node-color-active);")]),B("selected","background: var(--n-node-color-active);"),B("disabled",`
 cursor: not-allowed;
 `)])]),I("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[B("show-line","position: relative",[ne("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-line-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),B("last-child",[ne("&::before",`
 bottom: 50%;
 `)]),B("is-leaf",[ne("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-line-color);
 `)])]),me("show-line","height: 0;")]),I("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[ke("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[I("icon",[on]),I("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[on]),I("base-icon",[on])]),B("hide","visibility: hidden;"),B("expanded","transform: rotate(90deg);")]),I("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),I("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ne("&:last-child","margin-bottom: 0;"),ke("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),ke("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),ke("suffix",`
 display: inline-flex;
 `)]),ke("empty","margin: auto;")]);var Mt=globalThis&&globalThis.__awaiter||function(e,l,c,u){function s(a){return a instanceof c?a:new c(function(y){y(a)})}return new(c||(c=Promise))(function(a,y){function k(b){try{w(u.next(b))}catch(A){y(A)}}function m(b){try{w(u.throw(b))}catch(A){y(A)}}function w(b){b.done?a(b.value):s(b.value).then(k,m)}w((u=u.apply(e,l||[])).next())})};function wn(e,l,c,u){return{getIsGroup(){return!1},getKey(a){return a[e]},getChildren:u||(a=>a[l]),getDisabled(a){return!!(a[c]||a.checkboxDisabled)}}}const Ut={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array],overrideDefaultNodeClickBehavior:Function},Ht=Object.assign(Object.assign(Object.assign(Object.assign({},Cn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Lt},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ut),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Vt=ce({name:"Tree",props:Ht,slots:Object,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:c,mergedRtlRef:u}=ct(e),s=ut("Tree",u,l),a=Cn("Tree","-tree",zt,vt,e,l),y=F(null),k=F(null),m=F(null);function w(){var n;return(n=m.value)===null||n===void 0?void 0:n.listElRef}function b(){var n;return(n=m.value)===null||n===void 0?void 0:n.itemsElRef}const A=z(()=>{const{filter:n}=e;if(n)return n;const{labelField:t}=e;return(o,r)=>{if(!o.length)return!0;const d=r[t];return typeof d=="string"?d.toLowerCase().includes(o.toLowerCase()):!1}}),N=z(()=>{const{pattern:n}=e;return n?!n.length||!A.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Bt(e.data,A.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),E=z(()=>vn(e.showIrrelevantNodes?e.data:N.value.filteredTree,wn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),R=pe(Kn,null),C=e.internalTreeSelect?R.dataTreeMate:z(()=>e.showIrrelevantNodes?E.value:vn(e.data,wn(e.keyField,e.childrenField,e.disabledField,e.getChildren))),{watchProps:v}=e,f=F([]);v!=null&&v.includes("defaultCheckedKeys")?_e(()=>{f.value=e.defaultCheckedKeys}):f.value=e.defaultCheckedKeys;const h=T(e,"checkedKeys"),g=$e(h,f),p=z(()=>C.value.getCheckedKeys(g.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),$=Ot(e),K=z(()=>p.value.checkedKeys),L=z(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:p.value.indeterminateKeys}),X=F([]);v!=null&&v.includes("defaultSelectedKeys")?_e(()=>{X.value=e.defaultSelectedKeys}):X.value=e.defaultSelectedKeys;const Ne=T(e,"selectedKeys"),de=$e(Ne,X),Ce=F([]),Re=n=>{Ce.value=e.defaultExpandAll?C.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};v!=null&&v.includes("defaultExpandedKeys")?_e(()=>{Re(void 0)}):_e(()=>{Re(e.defaultExpandedKeys)});const Ue=T(e,"expandedKeys"),Y=$e(Ue,Ce),le=z(()=>E.value.getFlattenedNodes(Y.value)),{pendingNodeKeyRef:oe,handleKeydown:He}=Et({props:e,mergedCheckedKeysRef:g,mergedSelectedKeysRef:de,fNodesRef:le,mergedExpandedKeysRef:Y,handleCheck:Ze,handleSelect:Qe,handleSwitcherClick:sn});let J=null,ae=null;const Se=F(new Set),Ve=z(()=>e.internalHighlightKeySet||N.value.highlightKeySet),qe=$e(Ve,Se),i=F(new Set),S=z(()=>Y.value.filter(n=>!i.value.has(n)));let P=0;const j=F(null),U=F(null),Ae=F(null),Pe=F(null),Fe=F(0),Tn=z(()=>{const{value:n}=U;return n?n.parent:null});let We=!1;je(T(e,"data"),()=>{We=!0,ze(()=>{We=!1}),i.value.clear(),oe.value=null,De()},{deep:!1});let Ge=!1;const Xe=()=>{Ge=!0,ze(()=>{Ge=!1})};let Ke;je(T(e,"pattern"),(n,t)=>{if(e.showIrrelevantNodes)if(Ke=void 0,n){const{expandedKeys:o,highlightKeySet:r}=It(e.data,e.pattern,e.keyField,e.childrenField,A.value);Se.value=r,Xe(),fe(o,W(o),{node:null,action:"filter"})}else Se.value=new Set;else if(!n.length)Ke!==void 0&&(Xe(),fe(Ke,W(Ke),{node:null,action:"filter"}));else{t.length||(Ke=Y.value);const{expandedKeys:o}=N.value;o!==void 0&&(Xe(),fe(o,W(o),{node:null,action:"filter"}))}});function rn(n){return Mt(this,void 0,void 0,function*(){const{onLoad:t}=e;if(!t){yield Promise.resolve();return}const{value:o}=i;if(!o.has(n.key)){o.add(n.key);try{(yield t(n.rawNode))===!1&&he()}catch(r){console.error(r),he()}o.delete(n.key)}})}_e(()=>{var n;const{value:t}=E;if(!t)return;const{getNode:o}=t;(n=Y.value)===null||n===void 0||n.forEach(r=>{const d=o(r);d&&!d.shallowLoaded&&rn(d)})});const ue=F(!1),ie=F([]);je(S,(n,t)=>{if(!e.animated||Ge){ze(Oe);return}if(We)return;const o=Te(a.value.self.nodeHeight),r=new Set(t);let d=null,O=null;for(const _ of n)if(!r.has(_)){if(d!==null)return;d=_}const V=new Set(n);for(const _ of t)if(!V.has(_)){if(O!==null)return;O=_}if(d===null&&O===null)return;const{virtualScroll:G}=e,ve=(G?m.value.listElRef:y.value).offsetHeight,be=Math.ceil(ve/o)+1;let Z;if(d!==null&&(Z=t),O!==null&&(Z===void 0?Z=n:Z=Z.filter(_=>_!==O)),ue.value=!0,ie.value=E.value.getFlattenedNodes(Z),d!==null){const _=ie.value.findIndex(Q=>Q.key===d);if(~_){const Q=ie.value[_].children;if(Q){const ee=kn(Q,n);ie.value.splice(_+1,0,{__motion:!0,mode:"expand",height:G?ee.length*o:void 0,nodes:G?ee.slice(0,be):ee})}}}if(O!==null){const _=ie.value.findIndex(Q=>Q.key===O);if(~_){const Q=ie.value[_].children;if(!Q)return;ue.value=!0;const ee=kn(Q,n);ie.value.splice(_+1,0,{__motion:!0,mode:"collapse",height:G?ee.length*o:void 0,nodes:G?ee.slice(0,be):ee})}}});const Ln=z(()=>ft(le.value)),En=z(()=>ue.value?ie.value:le.value);function Oe(){const{value:n}=k;n&&n.sync()}function An(){ue.value=!1,e.virtualScroll&&ze(Oe)}function W(n){const{getNode:t}=C.value;return n.map(o=>{var r;return((r=t(o))===null||r===void 0?void 0:r.rawNode)||null})}function fe(n,t,o){const{"onUpdate:expandedKeys":r,onUpdateExpandedKeys:d}=e;Ce.value=n,r&&q(r,n,t,o),d&&q(d,n,t,o)}function dn(n,t,o){const{"onUpdate:checkedKeys":r,onUpdateCheckedKeys:d}=e;f.value=n,d&&q(d,n,t,o),r&&q(r,n,t,o)}function Pn(n,t){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:r}=e;o&&q(o,n,t),r&&q(r,n,t)}function Ye(n,t,o){const{"onUpdate:selectedKeys":r,onUpdateSelectedKeys:d}=e;X.value=n,d&&q(d,n,t,o),r&&q(r,n,t,o)}function Fn(n){const{onDragenter:t}=e;t&&q(t,n)}function On(n){const{onDragleave:t}=e;t&&q(t,n)}function In(n){const{onDragend:t}=e;t&&q(t,n)}function Bn(n){const{onDragstart:t}=e;t&&q(t,n)}function $n(n){const{onDragover:t}=e;t&&q(t,n)}function jn(n){const{onDrop:t}=e;t&&q(t,n)}function De(){zn(),se()}function zn(){j.value=null}function se(){Fe.value=0,U.value=null,Ae.value=null,Pe.value=null,he()}function he(){J&&(window.clearTimeout(J),J=null),ae=null}function Ze(n,t){if(e.disabled||re(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){Qe(n);return}const o=t?"check":"uncheck",{checkedKeys:r,indeterminateKeys:d}=C.value[o](n.key,K.value,{cascade:e.cascade,checkStrategy:$.value,allowNotLoaded:e.allowCheckingNotLoaded});dn(r,W(r),{node:n.rawNode,action:o}),Pn(d,W(d))}function Mn(n){if(e.disabled)return;const{key:t}=n,{value:o}=Y,r=o.findIndex(d=>d===t);if(~r){const d=Array.from(o);d.splice(r,1),fe(d,W(d),{node:n.rawNode,action:"collapse"})}else{const d=E.value.getNode(t);if(!d||d.isLeaf)return;let O;if(e.accordion){const V=new Set(n.siblings.map(({key:G})=>G));O=o.filter(G=>!V.has(G)),O.push(t)}else O=o.concat(t);fe(O,W(O),{node:n.rawNode,action:"expand"})}}function sn(n){e.disabled||ue.value||Mn(n)}function Qe(n){if(!(e.disabled||!e.selectable)){if(oe.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:t,indeterminateKeys:o}}=p;e.multiple?Ze(n,!(t.includes(n.key)||o.includes(n.key))):dn([n.key],W([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const t=Array.from(de.value),o=t.findIndex(r=>r===n.key);~o?e.cancelable&&t.splice(o,1):~o||t.push(n.key),Ye(t,W(t),{node:n.rawNode,action:~o?"unselect":"select"})}else de.value.includes(n.key)?e.cancelable&&Ye([],[],{node:n.rawNode,action:"unselect"}):Ye([n.key],W([n.key]),{node:n.rawNode,action:"select"})}}function Un(n){if(J&&(window.clearTimeout(J),J=null),n.isLeaf)return;ae=n.key;const t=()=>{if(ae!==n.key)return;const{value:o}=Ae;if(o&&o.key===n.key&&!Y.value.includes(n.key)){const r=Y.value.concat(n.key);fe(r,W(r),{node:n.rawNode,action:"expand"})}J=null,ae=null};n.shallowLoaded?J=window.setTimeout(()=>{t()},1e3):J=window.setTimeout(()=>{rn(n).then(()=>{t()})},1e3)}function Hn({event:n,node:t}){!e.draggable||e.disabled||re(t,e.disabledField)||(cn({event:n,node:t},!1),Fn({event:n,node:t.rawNode}))}function Vn({event:n,node:t}){!e.draggable||e.disabled||re(t,e.disabledField)||On({event:n,node:t.rawNode})}function qn(n){n.target===n.currentTarget&&se()}function Wn({event:n,node:t}){De(),!(!e.draggable||e.disabled||re(t,e.disabledField))&&In({event:n,node:t.rawNode})}function Gn({event:n,node:t}){!e.draggable||e.disabled||re(t,e.disabledField)||(P=n.clientX,j.value=t,Bn({event:n,node:t.rawNode}))}function cn({event:n,node:t},o=!0){var r;if(!e.draggable||e.disabled||re(t,e.disabledField))return;const{value:d}=j;if(!d)return;const{allowDrop:O,indent:V}=e;o&&$n({event:n,node:t.rawNode});const G=n.currentTarget,{height:ve,top:be}=G.getBoundingClientRect(),Z=n.clientY-be;let _;O({node:t.rawNode,dropPosition:"inside",phase:"drag"})?Z<=8?_="before":Z>=ve-8?_="after":_="inside":Z<=ve/2?_="before":_="after";const{value:ee}=Ln;let D,M;const ye=ee(t.key);if(ye===null){se();return}let Ie=!1;_==="inside"?(D=t,M="inside"):_==="before"?t.isFirstChild?(D=t,M="before"):(D=le.value[ye-1],M="after"):(D=t,M="after"),!D.isLeaf&&Y.value.includes(D.key)&&(Ie=!0,M==="after"&&(D=le.value[ye+1],D?M="before":(D=t,M="inside")));const fn=D;if(Ae.value=fn,!Ie&&d.isLastChild&&d.key===D.key&&(M="after"),M==="after"){let hn=P-n.clientX,Je=0;for(;hn>=V/2&&D.parent!==null&&D.isLastChild&&Je<1;)hn-=V,Je+=1,D=D.parent;Fe.value=Je}else Fe.value=0;if((d.contains(D)||M==="inside"&&((r=d.parent)===null||r===void 0?void 0:r.key)===D.key)&&!(d.key===fn.key&&d.key===D.key)){se();return}if(!O({node:D.rawNode,dropPosition:M,phase:"drag"})){se();return}if(d.key===D.key)he();else if(ae!==D.key)if(M==="inside"){if(e.expandOnDragenter){if(Un(D),!D.shallowLoaded&&ae!==D.key){De();return}}else if(!D.shallowLoaded){De();return}}else he();else M!=="inside"&&he();Pe.value=M,U.value=D}function Xn({event:n,node:t,dropPosition:o}){if(!e.draggable||e.disabled||re(t,e.disabledField))return;const{value:r}=j,{value:d}=U,{value:O}=Pe;if(!(!r||!d||!O)&&e.allowDrop({node:d.rawNode,dropPosition:O,phase:"drag"})&&r.key!==d.key){if(O==="before"){const V=r.getNext({includeDisabled:!0});if(V&&V.key===d.key){se();return}}if(O==="after"){const V=r.getPrev({includeDisabled:!0});if(V&&V.key===d.key){se();return}}jn({event:n,node:d.rawNode,dragNode:r.rawNode,dropPosition:o}),De()}}function Yn(){Oe()}function Zn(){Oe()}function Qn(n){var t;if(e.virtualScroll||e.internalScrollable){const{value:o}=k;if(!((t=o==null?void 0:o.containerRef)===null||t===void 0)&&t.contains(n.relatedTarget))return;oe.value=null}else{const{value:o}=y;if(o!=null&&o.contains(n.relatedTarget))return;oe.value=null}}je(oe,n=>{var t,o;if(n!==null){if(e.virtualScroll)(t=m.value)===null||t===void 0||t.scrollTo({key:n});else if(e.internalScrollable){const{value:r}=k;if(r===null)return;const d=(o=r.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${Sn(n)}"]`);if(!d)return;r.scrollTo({el:d})}}}),ht(Ee,{loadingKeysRef:i,highlightKeySetRef:qe,displayedCheckedKeysRef:K,displayedIndeterminateKeysRef:L,mergedSelectedKeysRef:de,mergedExpandedKeysRef:Y,mergedThemeRef:a,mergedCheckStrategyRef:$,nodePropsRef:T(e,"nodeProps"),disabledRef:T(e,"disabled"),checkableRef:T(e,"checkable"),selectableRef:T(e,"selectable"),expandOnClickRef:T(e,"expandOnClick"),onLoadRef:T(e,"onLoad"),draggableRef:T(e,"draggable"),blockLineRef:T(e,"blockLine"),indentRef:T(e,"indent"),cascadeRef:T(e,"cascade"),checkOnClickRef:T(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Ae,droppingNodeParentRef:Tn,draggingNodeRef:j,droppingPositionRef:Pe,droppingOffsetLevelRef:Fe,fNodesRef:le,pendingNodeKeyRef:oe,showLineRef:T(e,"showLine"),disabledFieldRef:T(e,"disabledField"),internalScrollableRef:T(e,"internalScrollable"),internalCheckboxFocusableRef:T(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:T(e,"renderLabel"),renderPrefixRef:T(e,"renderPrefix"),renderSuffixRef:T(e,"renderSuffix"),renderSwitcherIconRef:T(e,"renderSwitcherIcon"),labelFieldRef:T(e,"labelField"),multipleRef:T(e,"multiple"),overrideDefaultNodeClickBehaviorRef:T(e,"overrideDefaultNodeClickBehavior"),handleSwitcherClick:sn,handleDragEnd:Wn,handleDragEnter:Hn,handleDragLeave:Vn,handleDragStart:Gn,handleDrop:Xn,handleDragOver:cn,handleSelect:Qe,handleCheck:Ze});function Jn(n,t){var o,r;typeof n=="number"?(o=m.value)===null||o===void 0||o.scrollTo(n,t||0):(r=m.value)===null||r===void 0||r.scrollTo(n)}const et={handleKeydown:He,scrollTo:Jn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=p.value;return{keys:n,options:W(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=p.value;return{keys:n,options:W(n)}}},un=z(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:t,nodeBorderRadius:o,nodeColorHover:r,nodeColorPressed:d,nodeColorActive:O,arrowColor:V,loadingColor:G,nodeTextColor:ve,nodeTextColorDisabled:be,dropMarkColor:Z,nodeWrapperPadding:_,nodeHeight:Q,lineHeight:ee,lineColor:D}}=a.value,M=nn(_,"top"),ye=nn(_,"bottom"),Ie=Nn(Te(Q)-Te(M)-Te(ye));return{"--n-arrow-color":V,"--n-loading-color":G,"--n-bezier":n,"--n-font-size":t,"--n-node-border-radius":o,"--n-node-color-active":O,"--n-node-color-hover":r,"--n-node-color-pressed":d,"--n-node-text-color":ve,"--n-node-text-color-disabled":be,"--n-drop-mark-color":Z,"--n-node-wrapper-padding":_,"--n-line-offset-top":`-${M}`,"--n-line-offset-bottom":`-${ye}`,"--n-node-content-height":Ie,"--n-line-height":ee,"--n-line-color":D}}),ge=c?gt("tree",void 0,un,e):void 0;return Object.assign(Object.assign({},et),{mergedClsPrefix:l,mergedTheme:a,rtlEnabled:s,fNodes:En,aip:ue,selfElRef:y,virtualListInstRef:m,scrollbarInstRef:k,handleFocusout:Qn,handleDragLeaveTree:qn,handleScroll:Yn,getScrollContainer:w,getScrollContent:b,handleAfterEnter:An,handleResize:Zn,cssVars:c?void 0:un,themeClass:ge==null?void 0:ge.themeClass,onRender:ge==null?void 0:ge.onRender})},render(){var e;const{fNodes:l,internalRenderEmpty:c}=this;if(!l.length&&c)return c();const{mergedClsPrefix:u,blockNode:s,blockLine:a,draggable:y,disabled:k,internalFocusable:m,checkable:w,handleKeydown:b,rtlEnabled:A,handleFocusout:N,scrollbarProps:E}=this,R=m&&!k,C=R?"0":void 0,v=[`${u}-tree`,A&&`${u}-tree--rtl`,w&&`${u}-tree--checkable`,(a||s)&&`${u}-tree--block-node`,a&&`${u}-tree--block-line`],f=g=>"__motion"in g?x(jt,{height:g.height,nodes:g.nodes,clsPrefix:u,mode:g.mode,onAfterEnter:this.handleAfterEnter}):x(_n,{key:g.key,tmNode:g,clsPrefix:u});if(this.virtualScroll){const{mergedTheme:g,internalScrollablePadding:p}=this,$=nn(p||"0");return x(yn,Object.assign({},E,{ref:"scrollbarInstRef",onDragleave:y?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:v,theme:g.peers.Scrollbar,themeOverrides:g.peerOverrides.Scrollbar,tabindex:C,onKeydown:R?b:void 0,onFocusout:R?N:void 0}),{default:()=>{var K;return(K=this.onRender)===null||K===void 0||K.call(this),l.length?x(_t,{ref:"virtualListInstRef",items:this.fNodes,itemSize:Te(g.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:$.top,paddingBottom:$.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:$.left,paddingRight:$.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:L})=>f(L)}):bn(this.$slots.empty,()=>[x(an,{class:`${u}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})])}})}const{internalScrollable:h}=this;return v.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),h?x(yn,Object.assign({},E,{class:v,tabindex:C,onKeydown:R?b:void 0,onFocusout:R?N:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>x("div",{onDragleave:y?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(f))}):x("div",{class:v,tabindex:C,ref:"selfElRef",style:this.cssVars,onKeydown:R?b:void 0,onFocusout:R?N:void 0,onDragleave:y?this.handleDragLeaveTree:void 0},l.length?l.map(f):bn(this.$slots.empty,()=>[x(an,{class:`${u}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),qt=bt("all-application",!1,function(e){return te("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[te("path",{d:"M18 6H8C6.89543 6 6 6.89543 6 8V18C6 19.1046 6.89543 20 8 20H18C19.1046 20 20 19.1046 20 18V8C20 6.89543 19.1046 6 18 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),te("path",{d:"M18 28H8C6.89543 28 6 28.8954 6 30V40C6 41.1046 6.89543 42 8 42H18C19.1046 42 20 41.1046 20 40V30C20 28.8954 19.1046 28 18 28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),te("path",{d:"M40 6H30C28.8954 6 28 6.89543 28 8V18C28 19.1046 28.8954 20 30 20H40C41.1046 20 42 19.1046 42 18V8C42 6.89543 41.1046 6 40 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),te("path",{d:"M40 28H30C28.8954 28 28 28.8954 28 30V40C28 41.1046 28.8954 42 30 42H40C41.1046 42 42 41.1046 42 40V30C42 28.8954 41.1046 28 40 28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Wt=()=>Rn("/api/v1/organize/department/all"),Gt=()=>Rn("/api/v1/organize/personnel/all");const Xt={class:"el-container is-vertical height100"},Yt={class:"el-header me-view-header bdr-b"},Zt={style:{"font-weight":"500"}},Qt={class:"el-container"},Jt={key:0,class:"el-main me-scrollbar pd-10"},el={class:"cards"},nl={key:1,class:"el-main flex-center"},tl={key:2,class:"el-aside aside bdr-l"},ll={__name:"organize",setup(e){const l=kt(),c=mt(),u=xt(),{showUserInfoModal:s}=St(),a=F(-1),y=F(""),k=F(!0),m=F([]),w=z(()=>m.value.filter(h=>h.nickname.match(y.value)!=null&&(a.value==-1||h.dept_items.some(g=>g.dept_id==a.value)))),b=F([]),A=F("全体成员"),N=h=>{c.uid!=h.user_id?u.toTalk(1,h.user_id,l):window.$message.info("禁止给自己发送消息!!!")};function E(h){const g={};h.forEach(K=>g[K.dept_id]=K);const p=K=>{let L=[];return K.split(",").forEach(X=>{g[parseInt(X)]&&L.push(g[parseInt(X)].dept_name)}),L},$=[];return h.forEach(K=>{const L=g[K.parent_id];K.breadcrumb=p(K.ancestors||"").join(" / "),L?(L.children==null&&(L.children=[]),L.children.push(K)):$.push(K)}),$}const R=h=>{s(h.user_id)},C=({option:h})=>({onClick(){A.value=h.breadcrumb||"全部成员",a.value=h.dept_id}});function v(){Wt().then(h=>{const g=h.data.items||[];g.unshift({dept_id:-1,dept_name:"全部成员",parent_id:0,ancestors:"0"});for(const p of g)p.suffix=0,p.dept_id>0&&(p.ancestors=`${p.ancestors},${p.dept_id}`);b.value=E(g)})}async function f(){const h=await Gt();if(!h||h.code!=200)return;let g=h.data.items||[];g.map(p=>{p.online=!1,p.sort=1e6,p.position_items.sort((K,L)=>K.sort-L.sort);let $=[];for(const K of p.position_items)$.push(K.name),K.sort<p.sort&&(p.sort=K.sort);return p.position=$.join("、"),p}),m.value=g.sort((p,$)=>p.sort-$.sort)}return f(),v(),(h,g)=>{const p=tn("n-icon"),$=tn("n-input"),K=tn("n-space");return xe(),Le("section",Xt,[we("header",Yt,[we("div",Zt,mn(A.value)+" ("+mn(w.value.length)+")",1),we("div",null,[te(K,{style:{display:"flex","align-items":"center"}},{default:ln(()=>[te($,{value:y.value,"onUpdate:value":g[0]||(g[0]=L=>y.value=L),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{width:"200px"},round:""},{prefix:ln(()=>[te(p,{component:Me(Kt)},null,8,["component"])]),_:1},8,["value"]),te(p,{class:"pointer",style:{"margin-top":"5px"},component:Me(qt),size:18,onClick:g[1]||(g[1]=L=>k.value=!k.value)},null,8,["component"])]),_:1})])]),we("section",Qt,[w.value.length?(xe(),Le("main",Jt,[we("div",el,[(xe(!0),Le(wt,null,pt(w.value,L=>(xe(),Ct(Rt,{key:L.id,username:L.nickname,gender:L.gender,motto:L.position,flag:"查看",onClick:X=>R(L),onToTalk:X=>N(L)},null,8,["username","gender","motto","onClick","onToTalk"]))),128))])])):(xe(),Le("main",nl,[te(Me(an),{size:"200",description:"暂无相关数据"},{icon:ln(()=>g[2]||(g[2]=[we("img",{src:nt,alt:""},null,-1)])),_:1})])),k.value?(xe(),Le("aside",tl,[te(Me(Vt),{"key-field":"dept_id","label-field":"dept_name",data:b.value,"default-expand-all":!0,cancelable:!0,"default-selected-keys":[-1],"node-props":C},null,8,["data"])])):Nt("",!0)])])}}},ul=yt(ll,[["__scopeId","data-v-60c25ff1"]]);export{ul as default};
